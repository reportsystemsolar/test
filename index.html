<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ú¯Ø²Ø§Ø±Ø´ Ø±ÙˆØ²Ø§Ù†Ù‡ Ù†ÛŒØ±ÙˆÚ¯Ø§Ù‡ Ø®ÙˆØ±Ø´ÛŒØ¯ÛŒ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', 'Tahoma', 'Arial', sans-serif;
            background: #f8fafc;
            min-height: 100vh;
            padding: 20px;
            color: #1e293b;
            line-height: 1.6;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            overflow: hidden;
            border: 1px solid #e2e8f0;
        }

        .header {
            background: linear-gradient(135deg, #475569 0%, #334155 100%);
            color: white;
            padding: 32px;
            text-align: center;
            border-bottom: 1px solid #e2e8f0;
        }

        .header h1 {
            font-size: 1.875rem;
            font-weight: 600;
            margin-bottom: 8px;
            letter-spacing: -0.025em;
        }

        .header p {
            opacity: 0.9;
            font-size: 0.875rem;
            font-weight: 400;
        }

        .progress-bar {
            background: rgba(255,255,255,0.2);
            height: 6px;
            border-radius: 3px;
            margin-top: 24px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: white;
            border-radius: 3px;
            transition: width 0.3s ease;
        }

        .step-indicator {
            display: flex;
            justify-content: center;
            margin: 24px 0;
            flex-wrap: wrap;
            gap: 8px;
        }

        .step {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: #e2e8f0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 0.875rem;
            transition: all 0.2s ease;
            color: #64748b;
        }

        .step.active {
            background: #475569;
            color: white;
        }

        .step.completed {
            background: #10b981;
            color: white;
        }

        .form-step {
            display: none;
            padding: 32px;
            animation: fadeIn 0.3s ease;
        }

        .form-step.active {
            display: block;
        }

        .form-step h2 {
            font-size: 1.5rem;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 24px;
            padding-bottom: 12px;
            border-bottom: 2px solid #e2e8f0;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: #374151;
            font-size: 0.875rem;
        }

        input[type="text"],
        input[type="number"],
        input[type="date"],
        select,
        textarea {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            font-size: 0.875rem;
            transition: border-color 0.3s ease;
            background: white;
        }

        input:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: #475569;
            box-shadow: 0 0 0 3px rgba(71, 85, 105, 0.1);
        }

        .radio-group {
            display: flex;
            flex-wrap: wrap;
            gap: 16px;
            margin-top: 8px;
        }

        .radio-item {
            display: flex;
            align-items: center;
            cursor: pointer;
            padding: 8px 12px;
            border-radius: 6px;
            transition: background-color 0.2s ease;
        }

        .radio-item:hover {
            background: #f1f5f9;
        }

        .radio-item input[type="radio"] {
            margin-left: 8px;
            accent-color: #475569;
        }

        .card {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 24px;
            margin-bottom: 24px;
        }

        .card h3 {
            color: #1e293b;
            margin-bottom: 16px;
            font-size: 1.125rem;
            font-weight: 600;
            padding-bottom: 8px;
            border-bottom: 2px solid #475569;
        }

        .personnel-grid,
        .equipment-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 16px;
        }

        .personnel-item,
        .equipment-item {
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 16px;
            transition: box-shadow 0.2s ease;
        }

        .personnel-item:hover,
        .equipment-item:hover {
            box-shadow: 0 2px 4px -1px rgba(0, 0, 0, 0.1);
        }

        .personnel-item label,
        .equipment-item label {
            font-weight: 600;
            color: #374151;
            margin-bottom: 12px;
        }

        .personnel-inputs,
        .equipment-inputs {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-top: 12px;
        }

        .equipment-inputs {
            grid-template-columns: repeat(auto-fit, minmax(90px, 1fr));
        }

        .checkbox-group {
            margin-bottom: 16px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
            cursor: pointer;
            padding: 8px 12px;
            border-radius: 6px;
            transition: background-color 0.2s ease;
        }

        .checkbox-item:hover {
            background: #f1f5f9;
        }

        .checkbox-item input[type="checkbox"] {
            margin-left: 12px;
            accent-color: #475569;
        }

        .sub-inputs {
            display: none;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 12px;
            margin-top: 12px;
            padding: 16px;
            background: white;
            border-radius: 6px;
            border: 1px solid #e2e8f0;
        }

        .sub-inputs.active {
            display: grid;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            padding: 24px 32px;
            background: #f8fafc;
            border-top: 1px solid #e2e8f0;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: 500;
            min-width: 100px;
        }

        .btn-primary {
            background: #475569;
            color: white;
        }

        .btn-primary:hover {
            background: #334155;
            transform: translateY(-1px);
        }

        .btn-secondary {
            background: #6b7280;
            color: white;
        }

        .btn-secondary:hover {
            background: #4b5563;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .message {
            padding: 16px 24px;
            border-radius: 8px;
            margin: 24px 32px;
            text-align: center;
            display: none;
            font-weight: 500;
        }

        .message.success {
            background: #ecfdf5;
            color: #065f46;
            border: 1px solid #a7f3d0;
        }

        .message.error {
            background: #fef2f2;
            color: #991b1b;
            border: 1px solid #fecaca;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            body {
                padding: 12px;
            }
            
            .container {
                margin: 0;
                border-radius: 8px;
            }
            
            .header {
                padding: 24px 20px;
            }
            
            .header h1 {
                font-size: 1.5rem;
            }
            
            .form-step {
                padding: 24px 20px;
            }
            
            .form-row {
                grid-template-columns: 1fr;
                gap: 16px;
            }
            
            .personnel-grid,
            .equipment-grid {
                grid-template-columns: 1fr;
            }
            
            .navigation {
                padding: 20px;
                flex-direction: column;
                gap: 12px;
            }

            .step-indicator {
                margin: 16px 0;
            }

            .step {
                width: 32px;
                height: 32px;
                font-size: 0.75rem;
            }
        }

        input[type="number"]::-webkit-outer-spin-button,
        input[type="number"]::-webkit-inner-spin-button {
            opacity: 1;
            height: 20px;
            cursor: pointer;
        }

        input[type="number"] {
            -moz-appearance: auto;
        }

        select {
            cursor: pointer;
        }

        /* Loading state */
        .btn.loading {
            position: relative;
            color: transparent;
        }

        .btn.loading::after {
            content: '';
            position: absolute;
            width: 16px;
            height: 16px;
            top: 50%;
            left: 50%;
            margin-left: -8px;
            margin-top: -8px;
            border: 2px solid transparent;
            border-top-color: currentColor;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        .message.info {
            background: #eff6ff;
            color: #1e40af;
            border: 1px solid #bfdbfe;
        }

        /* Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø§Ø² Ù…Ø®ÙÛŒ Ø¨ÙˆØ¯Ù† ØªÙ…Ø§Ù… ØµÙØ­Ø§Øª Ø¯Ø± Ø§Ø¨ØªØ¯Ø§ */
        #loginPage, #mainContainer, #logoutContainer, #successPage {
            transition: opacity 0.3s ease;
        }
        /* Ø«Ø§Ø¨Øª Ú©Ø±Ø¯Ù† Ø¯Ú©Ù…Ù‡ Ø®Ø±ÙˆØ¬ */
        #logoutContainer {
            position: absolute !important;
            top: 0 !important;
            left: 0 !important;
            right: unset !important;
            margin: 0 !important;
            z-index: 9999 !important;
            backdrop-filter: blur(10px) !important;
            background: rgba(255, 255, 255, 0.95) !important;
            border-radius: 0 0 8px 8px !important;
            padding: 8px 12px !important;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15) !important;
            border: 1px solid rgba(0, 0, 0, 0.1) !important;
            border-top: none !important;
            margin-bottom: -50px !important;
            width: auto !important;
            display: inline-block !important;
        }

        #logoutContainer button {
            backdrop-filter: blur(10px) !important;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1) !important;
            font-size: 0.8rem !important;
            padding: 6px 12px !important;
        }

        /* ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø±ÛŒØ³Ù¾Ø§Ù†Ø³ÛŒÙˆ Ø¨Ø±Ø§ÛŒ Ø¯Ú©Ù…Ù‡ Ø®Ø±ÙˆØ¬ */
        @media (max-width: 768px) {
            #logoutContainer {
                /* right: 10px !important; */
                padding: 6px 8px !important;
                margin-bottom: -45px !important;
            }
            
            #logoutContainer button {
                padding: 5px 10px !important;
                font-size: 0.75rem !important;
            }
        }
        .description-field {
            margin-top: 12px;
            display: none;
        }

        .description-field.active {
            display: block;
        }

        .description-field textarea {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 0.875rem;
            resize: vertical;
            min-height: 60px;
            transition: border-color 0.3s ease;
            background: #fafafa;
        }

        .description-field textarea:focus {
            outline: none;
            border-color: #475569;
            box-shadow: 0 0 0 3px rgba(71, 85, 105, 0.1);
            background: white;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        #imagePreview {
            margin-top: 20px;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 12px;
        }

        .img-container {
            position: relative;
        }

        .img-container .delete-btn {
            position: absolute;
            top: 4px;
            right: 4px;
            background: rgba(220, 38, 38, 0.8);
            color: white;
            border: none;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            font-size: 16px;
            line-height: 24px;
            text-align: center;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.2s ease;
        }

        .img-container .delete-btn:hover {
            background: rgba(220, 38, 38, 1);
        }

        /* Ø±ÛŒØ³Ù¾Ø§Ù†Ø³ÛŒÙˆ Ø¨Ø±Ø§ÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„ */
        @media (max-width: 768px) {
            #imagePreview {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
                gap: 8px;
            }
            
            .img-container {
                height: 120px !important;
            }
            
            .img-container img {
                height: 120px !important;
            }
        }
        .submission-progress {
            width: 100%;
            height: 8px;
            background: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
            margin: 20px 0;
        }

        .submission-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #10b981, #059669);
            border-radius: 4px;
            transition: width 0.5s ease;
            width: 0%;
        }

        .submission-status {
            text-align: center;
            color: #374151;
            font-size: 0.875rem;
            margin: 12px 0;
            min-height: 20px;
        }

    </style>
</head>
<body>

    <div id="loginPage" class="container">
        <div class="header">
            <h1>ğŸ” ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø³ÛŒØ³ØªÙ…</h1>
            <p>Ú¯Ø²Ø§Ø±Ø´ Ø±ÙˆØ²Ø§Ù†Ù‡ Ù†ÛŒØ±ÙˆÚ¯Ø§Ù‡ Ø®ÙˆØ±Ø´ÛŒØ¯ÛŒ</p>
        </div>
        
        <div style="padding: 60px 40px;">
            <form id="loginForm" style="max-width: 400px; margin: 0 auto;">
                <div class="form-group">
                    <label for="username">Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ:</label>
                    <input type="text" id="username" name="username" required 
                        style="text-align: center; font-weight: bold;">
                </div>
                
                <div class="form-group">
                    <label for="password">Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±:</label>
                    <input type="text" id="password" name="password" required 
                        style="text-align: center; font-weight: bold;">
                </div>
                
                <div style="text-align: center; margin-top: 30px;">
                    <button type="submit" class="btn btn-primary" id="loginBtn">
                        ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø³ÛŒØ³ØªÙ…
                    </button>
                </div>
            </form>
            
            <div class="message" id="loginMessage" style="margin: 20px 0;"></div>
        </div>
    </div>



    <div class="container" id="mainContainer" style="display: none;">
        <div class="header">
            <h1>Ú¯Ø²Ø§Ø±Ø´ Ø±ÙˆØ²Ø§Ù†Ù‡ Ù†ÛŒØ±ÙˆÚ¯Ø§Ù‡ Ø®ÙˆØ±Ø´ÛŒØ¯ÛŒ</h1>
            <p>Ú¯Ø²Ø§Ø±Ø´ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø±ÙˆØ²Ø§Ù†Ù‡ Ø³Ø±Ù¾Ø±Ø³Øª Ø³Ø§Ø®ØªÚ¯Ø§Ù‡</p>
            <div class="progress-bar">
                <div class="progress-fill"></div>
            </div>
        </div>

        <div class="step-indicator">
            <div class="step active">1</div>
            <div class="step">2</div>
            <div class="step">3</div>
            <div class="step">4</div>
            <div class="step">5</div>
            <div class="step">6</div>
            <div class="step">7</div>
        </div>

        <form id="dailyReportForm">
            <!-- Ù…Ø±Ø­Ù„Ù‡ 1: Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ù„ÛŒ -->
            <div class="form-step active">
                <h2>Ù…Ø±Ø­Ù„Ù‡ Û±: Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ù„ÛŒ Ø³Ø§Ø®ØªÚ¯Ø§Ù‡</h2>
                
                <div class="form-row">

                    <div class="form-group">
                        <label for="supervisorName">Ù†Ø§Ù… Ø´Ù…Ø§:</label>
                        <select id="supervisorName" name="supervisorName" required>
                            <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
                            <option value="Ø±Ø¶Ø§ Ø´Ù‡Ù…Ø±Ø§Ø¯ÛŒ">Ø±Ø¶Ø§ Ø´Ù‡Ù…Ø±Ø§Ø¯ÛŒ</option>
                            <option value="Ø¹Ù„ÛŒ Ú†Ù‚Ø±ÛŒ Ù…ÙØ±Ø¯">Ø¹Ù„ÛŒ Ú†Ù‚Ø±ÛŒ Ù…ÙØ±Ø¯</option>
                            <option value="Ø³ÛŒØ¯Ù…Ø±ØªØ¶ÛŒ Ø­Ø³ÛŒÙ†ÛŒ">Ø³ÛŒØ¯Ù…Ø±ØªØ¶ÛŒ Ø­Ø³ÛŒÙ†ÛŒ</option>
                            <option value="Ø®Ø§Ù†ÙˆÙ… ØªØ³Øª">Ø®Ø§Ù†ÙˆÙ… ØªØ³Øª</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="siteName">Ù†Ø§Ù… Ø³Ø§Ø®ØªÚ¯Ø§Ù‡:</label>
                        <select id="siteName" name="siteName" required>
                            <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
                            <option value="Ø¬Ø§Ø¯Ù‡ Ù†ÙØª">Ø¬Ø§Ø¯Ù‡ Ù†ÙØª</option>
                            <option value="Ù…ÛŒÚ¯Ùˆ">Ù…ÛŒÚ¯Ùˆ</option>
                            <option value="Ø¢Ù‚ Ù‚Ø¨Ø±">Ø¢Ù‚ Ù‚Ø¨Ø±</option>
                            <option value="Ø§Ú¯Ø±ÛŒ Ø¨ÙˆØºØ§Ø²">Ø§Ú¯Ø±ÛŒ Ø¨ÙˆØºØ§Ø²</option>
                            <option value="Ø­Ø§Ù„ÛŒ Ø¢Ø®ÙˆÙ†Ø¯">Ø­Ø§Ù„ÛŒ Ø¢Ø®ÙˆÙ†Ø¯</option>
                            <option value="Ø¹Ø·Ø§ Ø¢Ø¨Ø§Ø¯">Ø¹Ø·Ø§ Ø¢Ø¨Ø§Ø¯</option>
                            <option value="Ù‚Ø±Ù‡ Ù…Ø­Ù…Ø¯ ØªÙ¾Ù‡">Ù‚Ø±Ù‡ Ù…Ø­Ù…Ø¯ ØªÙ¾Ù‡</option>
                            <option value="Ú†Ø§ÛŒ Ù‚ÙˆØ´Ø§Ù†">Ú†Ø§ÛŒ Ù‚ÙˆØ´Ø§Ù†</option>
                            <option value="Ú†Ù† Ø³ÙˆÙ„ÛŒ">Ú†Ù† Ø³ÙˆÙ„ÛŒ</option>
                            <option value="Ø³Ù‚Ø± ÛŒÙ„Ù‚ÛŒ">Ø³Ù‚Ø± ÛŒÙ„Ù‚ÛŒ</option>
                            <option value="Ø§ÙˆÙ†Ù‚ ÛŒÙ„Ù‚ÛŒ">Ø§ÙˆÙ†Ù‚ ÛŒÙ„Ù‚ÛŒ</option>
                            <option value="Ú†Ù†Ø§Ø±Ø§Ù†">Ú†Ù†Ø§Ø±Ø§Ù†</option>
                            <option value="Ø¢Ù‚ Ù‚Ù…ÛŒØ´">Ø¢Ù‚ Ù‚Ù…ÛŒØ´</option>
                            <option value="Ø¢Ù‚ ØªÙ‚Ù‡">Ø¢Ù‚ ØªÙ‚Ù‡</option>
                            <option value="Ø§Ø³Ù„Ø§Ù… Ø¢Ø¨Ø§Ø¯">Ø§Ø³Ù„Ø§Ù… Ø¢Ø¨Ø§Ø¯</option>
                            <option value="Ø¨Ø¯Ø±Ø§Ù‚ Ù…Ù„Ø§">Ø¨Ø¯Ø±Ø§Ù‚ Ù…Ù„Ø§</option>
                            <option value="Ø¨ÛŒ Ø¨ÛŒ Ø´ÛŒØ±ÙˆØ§Ù†">Ø¨ÛŒ Ø¨ÛŒ Ø´ÛŒØ±ÙˆØ§Ù†</option>
                            <option value="Ø¯ÙˆØ²Ø§Ù„ÙˆÙ…">Ø¯ÙˆØ²Ø§Ù„ÙˆÙ…</option>
                            <option value="Ø³Ù„Ø·Ø§Ù†Ø¹Ù„ÛŒ">Ø³Ù„Ø·Ø§Ù†Ø¹Ù„ÛŒ</option>
                            <option value="Ø³ÛŒØ¯ Ù†ÛŒØ§Ø²">Ø³ÛŒØ¯ Ù†ÛŒØ§Ø²</option>
                            <option value="Ú©ÙˆÚ†Ú© Ø®Ø±Ø·ÙˆÙ…">Ú©ÙˆÚ†Ú© Ø®Ø±Ø·ÙˆÙ…</option>
                            <option value="ÛŒØ§Ø±ØªÛŒ Ù‚Ø§ÛŒÙ‡">ÛŒØ§Ø±ØªÛŒ Ù‚Ø§ÛŒÙ‡</option>
                            <option value="ÛŒØ§Ø³ÛŒ ØªÙ¾Ù‡">ÛŒØ§Ø³ÛŒ ØªÙ¾Ù‡</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                     <div class="form-group">
                        <label for="reportDate">ØªØ§Ø±ÛŒØ®:</label>
                        <input type="text" id="reportDate" name="reportDate" placeholder="Û±Û´Û°Û³/Û°Û³/Û²Û´" required>
                    </div>
                </div>

                <div class="form-group">
                    <label>ÙˆØ¶Ø¹ÛŒØª Ø³Ø§Ø®ØªÚ¯Ø§Ù‡:</label>
                    <div class="radio-group">
                        <div class="radio-item">
                            <label>ÙØ¹Ø§Ù„</label>
                            <input type="radio" name="siteStatus" value="ÙØ¹Ø§Ù„" required>
                        </div>
                        <div class="radio-item">
                            <label>Ù†ÛŒÙ…Ù‡ ÙØ¹Ø§Ù„</label>
                            <input type="radio" name="siteStatus" value="Ù†ÛŒÙ…Ù‡ ÙØ¹Ø§Ù„">
                        </div>
                        <div class="radio-item">
                            <label>ØºÛŒØ±ÙØ¹Ø§Ù„</label>
                            <input type="radio" name="siteStatus" value="ØºÛŒØ±ÙØ¹Ø§Ù„">
                        </div>
                        <div class="radio-item">
                            <label>ØªØ¹Ø·ÛŒÙ„</label>
                            <input type="radio" name="siteStatus" value="ØªØ¹Ø·ÛŒÙ„">
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="weatherStatus">ÙˆØ¶Ø¹ÛŒØª Ø¬ÙˆÛŒ:</label>
                    <select id="weatherStatus" name="weatherStatus" required>
                        <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
                        <option value="Ø¢ÙØªØ§Ø¨ÛŒ">Ø¢ÙØªØ§Ø¨ÛŒ</option>
                        <option value="Ù†ÛŒÙ…Ù‡ Ø§Ø¨Ø±ÛŒ">Ù†ÛŒÙ…Ù‡ Ø§Ø¨Ø±ÛŒ</option>
                        <option value="Ø§Ø¨Ø±ÛŒ">Ø§Ø¨Ø±ÛŒ</option>
                        <option value="Ø¨Ø§Ø±Ø§Ù†ÛŒ">Ø¨Ø§Ø±Ø§Ù†ÛŒ</option>
                        <option value="Ø·ÙˆÙØ§Ù†ÛŒ">Ø·ÙˆÙØ§Ù†ÛŒ</option>
                        <option value="ÛŒØ®â€ŒØ¨Ù†Ø¯Ø§Ù†">ÛŒØ®â€ŒØ¨Ù†Ø¯Ø§Ù†</option>
                    </select>
                </div>
            </div>

            <!-- Ù…Ø±Ø­Ù„Ù‡ 2: Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾Ø±Ø³Ù†Ù„ -->
            <div class="form-step">
                <h2>Ù…Ø±Ø­Ù„Ù‡ Û²: Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾Ø±Ø³Ù†Ù„ Ø³Ø§Ø®ØªÚ¯Ø§Ù‡</h2>
                
                <div class="personnel-grid">
                    <div class="personnel-item">
                        <label>Ø³Ø±Ù¾Ø±Ø³Øª Ø³Ø§Ø®ØªÚ¯Ø§Ù‡</label>
                        <div class="personnel-inputs">
                            <input type="number" name="supervisor_count" placeholder="ØªØ¹Ø¯Ø§Ø¯ Ù†ÙØ±Ø§Øª" min="0">
                            <input type="number" name="supervisor_hours" placeholder="Ø³Ø§Ø¹Øª Ú©Ø§Ø±ÛŒ Ù‡Ø± Ù†ÙØ±" min="0">
                        </div>
                    </div>
                    
                    <div class="personnel-item">
                        <label>Ù†Ù‚Ø´Ù‡â€ŒØ¨Ø±Ø¯Ø§Ø±</label>
                        <div class="personnel-inputs">
                            <input type="number" name="surveyor_count" placeholder="ØªØ¹Ø¯Ø§Ø¯ Ù†ÙØ±Ø§Øª" min="0">
                            <input type="number" name="surveyor_hours" placeholder="Ø³Ø§Ø¹Øª Ú©Ø§Ø±ÛŒ Ù‡Ø± Ù†ÙØ±" min="0">
                        </div>
                    </div>
                    
                    <div class="personnel-item">
                        <label>Ù†Ú¯Ù‡Ø¨Ø§Ù† Ø±ÙˆØ²</label>
                        <div class="personnel-inputs">
                            <input type="number" name="day_guard_count" placeholder="ØªØ¹Ø¯Ø§Ø¯ Ù†ÙØ±Ø§Øª" min="0">
                            <input type="number" name="day_guard_hours" placeholder="Ø³Ø§Ø¹Øª Ú©Ø§Ø±ÛŒ Ù‡Ø± Ù†ÙØ±" min="0">
                        </div>
                    </div>
                    
                    <div class="personnel-item">
                        <label>Ù†Ú¯Ù‡Ø¨Ø§Ù† Ø´Ø¨</label>
                        <div class="personnel-inputs">
                            <input type="number" name="night_guard_count" placeholder="ØªØ¹Ø¯Ø§Ø¯ Ù†ÙØ±Ø§Øª" min="0">
                            <input type="number" name="night_guard_hours" placeholder="Ø³Ø§Ø¹Øª Ú©Ø§Ø±ÛŒ Ù‡Ø± Ù†ÙØ±" min="0">
                        </div>
                    </div>
                    
                    <div class="personnel-item">
                        <label>Ú©Ø§Ø±Ú¯Ø± Ø³Ø§Ø¯Ù‡</label>
                        <div class="personnel-inputs">
                            <input type="number" name="worker_count" placeholder="ØªØ¹Ø¯Ø§Ø¯ Ù†ÙØ±Ø§Øª" min="0">
                            <input type="number" name="worker_hours" placeholder="Ø³Ø§Ø¹Øª Ú©Ø§Ø±ÛŒ Ù‡Ø± Ù†ÙØ±" min="0">
                        </div>
                    </div>
                    
                    <div class="personnel-item">
                        <label>Ø¨Ù†Ø§</label>
                        <div class="personnel-inputs">
                            <input type="number" name="mason_count" placeholder="ØªØ¹Ø¯Ø§Ø¯ Ù†ÙØ±Ø§Øª" min="0">
                            <input type="number" name="mason_hours" placeholder="Ø³Ø§Ø¹Øª Ú©Ø§Ø±ÛŒ Ù‡Ø± Ù†ÙØ±" min="0">
                        </div>
                    </div>
                    
                    <div class="personnel-item">
                        <label>Ø¯Ø§Ø±Ø¨Ø³Øª Ø¨Ù†Ø¯</label>
                        <div class="personnel-inputs">
                            <input type="number" name="scaffolder_count" placeholder="ØªØ¹Ø¯Ø§Ø¯ Ù†ÙØ±Ø§Øª" min="0">
                            <input type="number" name="scaffolder_hours" placeholder="Ø³Ø§Ø¹Øª Ú©Ø§Ø±ÛŒ Ù‡Ø± Ù†ÙØ±" min="0">
                        </div>
                    </div>
                    
                    <div class="personnel-item">
                        <label>Ø³Ø±Ú©Ø§Ø±Ú¯Ø±</label>
                        <div class="personnel-inputs">
                            <input type="number" name="foreman_count" placeholder="ØªØ¹Ø¯Ø§Ø¯ Ù†ÙØ±Ø§Øª" min="0">
                            <input type="number" name="foreman_hours" placeholder="Ø³Ø§Ø¹Øª Ú©Ø§Ø±ÛŒ Ù‡Ø± Ù†ÙØ±" min="0">
                        </div>
                    </div>
                    
                    <div class="personnel-item">
                        <label>Ø§ÛŒÙ…Ù†ÛŒ</label>
                        <div class="personnel-inputs">
                            <input type="number" name="safety_count" placeholder="ØªØ¹Ø¯Ø§Ø¯ Ù†ÙØ±Ø§Øª" min="0">
                            <input type="number" name="safety_hours" placeholder="Ø³Ø§Ø¹Øª Ú©Ø§Ø±ÛŒ Ù‡Ø± Ù†ÙØ±" min="0">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Ù…Ø±Ø­Ù„Ù‡ 3: Ø§Ú©ÛŒÙ¾ Ø§Ø¬Ø±Ø§ÛŒÛŒ -->
            <div class="form-step">
                <h2>Ù…Ø±Ø­Ù„Ù‡ Û³: Ø§Ú©ÛŒÙ¾ Ø§Ø¬Ø±Ø§ÛŒÛŒ</h2>
                
                <div class="personnel-grid">
                    <div class="personnel-item">
                        <label>Ø§Ù¾Ø±Ø§ØªÙˆØ± Ø¯Ø³ØªÚ¯Ø§Ù‡ Ø­ÙØ§Ø±</label>
                        <div class="personnel-inputs">
                            <input type="number" name="drill_operator_count" placeholder="ØªØ¹Ø¯Ø§Ø¯ Ù†ÙØ±Ø§Øª" min="0" >
                            <input type="number" name="drill_operator_hours" placeholder="Ø³Ø§Ø¹Øª Ú©Ø§Ø±ÛŒ Ù‡Ø± Ù†ÙØ±" min="0">
                        </div>
                    </div>
                    
                    <div class="personnel-item">
                        <label>Ù†ØµØ§Ø¨ Ù¾Ø§ÛŒÙ‡</label>
                        <div class="personnel-inputs">
                            <input type="number" name="base_installer_count" placeholder="ØªØ¹Ø¯Ø§Ø¯ Ù†ÙØ±Ø§Øª" min="0" >
                            <input type="number" name="base_installer_hours" placeholder="Ø³Ø§Ø¹Øª Ú©Ø§Ø±ÛŒ Ù‡Ø± Ù†ÙØ±" min="0">
                        </div>
                    </div>
                    
                    <div class="personnel-item">
                        <label>Ù†ØµØ§Ø¨ Ø³Ø§Ø²Ù‡</label>
                        <div class="personnel-inputs">
                            <input type="number" name="structure_installer_count" placeholder="ØªØ¹Ø¯Ø§Ø¯ Ù†ÙØ±Ø§Øª" min="0">
                            <input type="number" name="structure_installer_hours" placeholder="Ø³Ø§Ø¹Øª Ú©Ø§Ø±ÛŒ Ù‡Ø± Ù†ÙØ±" min="0">
                        </div>
                    </div>
                    
                    <div class="personnel-item">
                        <label>Ø±Ø§Ù†Ù†Ø¯Ù‡ Ú©Ø§Ù…ÛŒÙˆÙ†</label>
                        <div class="personnel-inputs">
                            <input type="number" name="truck_driver_count" placeholder="ØªØ¹Ø¯Ø§Ø¯ Ù†ÙØ±Ø§Øª" min="0">
                            <input type="number" name="truck_driver_hours" placeholder="Ø³Ø§Ø¹Øª Ú©Ø§Ø±ÛŒ Ù‡Ø± Ù†ÙØ±" min="0">
                        </div>
                    </div>
                    
                    <div class="personnel-item">
                        <label>Ø±Ø§Ù†Ù†Ø¯Ù‡ Ø¨ÛŒÙ„ Ù…Ú©Ø§Ù†ÛŒÚ©ÛŒ</label>
                        <div class="personnel-inputs">
                            <input type="number" name="excavator_driver_count" placeholder="ØªØ¹Ø¯Ø§Ø¯ Ù†ÙØ±Ø§Øª" min="0">
                            <input type="number" name="excavator_driver_hours" placeholder="Ø³Ø§Ø¹Øª Ú©Ø§Ø±ÛŒ Ù‡Ø± Ù†ÙØ±" min="0">
                        </div>
                    </div>
                    
                    <div class="personnel-item">
                        <label>Ø±Ø§Ù†Ù†Ø¯Ù‡ Ø¬Ø±Ø«Ù‚ÛŒÙ„</label>
                        <div class="personnel-inputs">
                            <input type="number" name="crane_driver_count" placeholder="ØªØ¹Ø¯Ø§Ø¯ Ù†ÙØ±Ø§Øª" min="0">
                            <input type="number" name="crane_driver_hours" placeholder="Ø³Ø§Ø¹Øª Ú©Ø§Ø±ÛŒ Ù‡Ø± Ù†ÙØ±" min="0">
                        </div>
                    </div>
                    
                    <div class="personnel-item">
                        <label>Ø±Ø§Ù†Ù†Ø¯Ù‡ ØºÙ„Ø·Ú©</label>
                        <div class="personnel-inputs">
                            <input type="number" name="roller_driver_count" placeholder="ØªØ¹Ø¯Ø§Ø¯ Ù†ÙØ±Ø§Øª" min="0">
                            <input type="number" name="roller_driver_hours" placeholder="Ø³Ø§Ø¹Øª Ú©Ø§Ø±ÛŒ Ù‡Ø± Ù†ÙØ±" min="0">
                        </div>
                    </div>
                    
                    <div class="personnel-item">
                        <label>Ø±Ø§Ù†Ù†Ø¯Ù‡ Ú¯Ø±ÛŒØ¯Ø±</label>
                        <div class="personnel-inputs">
                            <input type="number" name="grader_driver_count" placeholder="ØªØ¹Ø¯Ø§Ø¯ Ù†ÙØ±Ø§Øª" min="0">
                            <input type="number" name="grader_driver_hours" placeholder="Ø³Ø§Ø¹Øª Ú©Ø§Ø±ÛŒ Ù‡Ø± Ù†ÙØ±" min="0">
                        </div>
                    </div>
                    
                    <div class="personnel-item">
                        <label>Ø±Ø§Ù†Ù†Ø¯Ù‡ Ù„ÙˆØ¯Ø±</label>
                        <div class="personnel-inputs">
                            <input type="number" name="loader_driver_count" placeholder="ØªØ¹Ø¯Ø§Ø¯ Ù†ÙØ±Ø§Øª" min="0">
                            <input type="number" name="loader_driver_hours" placeholder="Ø³Ø§Ø¹Øª Ú©Ø§Ø±ÛŒ Ù‡Ø± Ù†ÙØ±" min="0">
                        </div>
                    </div>
                    
                    <div class="personnel-item">
                        <label>Ø±Ø§Ù†Ù†Ø¯Ù‡ Ù…ÛŒÚ©Ø³Ø±</label>
                        <div class="personnel-inputs">
                            <input type="number" name="mixer_driver_count" placeholder="ØªØ¹Ø¯Ø§Ø¯ Ù†ÙØ±Ø§Øª" min="0">
                            <input type="number" name="mixer_driver_hours" placeholder="Ø³Ø§Ø¹Øª Ú©Ø§Ø±ÛŒ Ù‡Ø± Ù†ÙØ±" min="0">
                        </div>
                    </div>
                    
                    <div class="personnel-item">
                        <label>Ø±Ø§Ù†Ù†Ø¯Ù‡ ØªØ§Ù†Ú©Ø±</label>
                        <div class="personnel-inputs">
                            <input type="number" name="tanker_driver_count" placeholder="ØªØ¹Ø¯Ø§Ø¯ Ù†ÙØ±Ø§Øª" min="0">
                            <input type="number" name="tanker_driver_hours" placeholder="Ø³Ø§Ø¹Øª Ú©Ø§Ø±ÛŒ Ù‡Ø± Ù†ÙØ±" min="0">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Ù…Ø±Ø­Ù„Ù‡ 4: Ù…Ø§Ø´ÛŒÙ†â€ŒØ¢Ù„Ø§Øª -->
            <div class="form-step">
                <h2>Ù…Ø±Ø­Ù„Ù‡ Û´: Ù…Ø§Ø´ÛŒÙ†â€ŒØ¢Ù„Ø§Øª</h2>
                
                <div class="equipment-grid">
                    <div class="equipment-item">
                        <label>Ø¯Ø³ØªÚ¯Ø§Ù‡ Ø­ÙØ§Ø± / Ø§ÙˆÚ¯Ø±</label>
                        <div class="equipment-inputs">
                            <input type="number" name="drill_total" placeholder="ØªØ¹Ø¯Ø§Ø¯ Ú©Ù„" min="0">
                            <input type="number" name="drill_active" placeholder="ØªØ¹Ø¯Ø§Ø¯ ÙØ¹Ø§Ù„" min="0">
                            <input type="number" name="drill_inactive" placeholder="ØªØ¹Ø¯Ø§Ø¯ ØºÛŒØ±ÙØ¹Ø§Ù„" min="0" onchange="toggleInactiveReason(this, 'drill_reason')">
                            <input type="number" name="drill_hours" placeholder="Ø³Ø§Ø¹Øª Ú©Ø§Ø±" min="0">
                        </div>
                        <input type="text" name="drill_reason" placeholder="Ø¹Ù„Øª ØºÛŒØ±ÙØ¹Ø§Ù„ Ø¨ÙˆØ¯Ù†" style="display:none; margin-top:10px;">
                    </div>
                    
                    <div class="equipment-item">
                        <label>Ù„ÙˆØ¯Ø±</label>
                        <div class="equipment-inputs">
                            <input type="number" name="loader_total" placeholder="ØªØ¹Ø¯Ø§Ø¯ Ú©Ù„" min="0">
                            <input type="number" name="loader_active" placeholder="ØªØ¹Ø¯Ø§Ø¯ ÙØ¹Ø§Ù„" min="0">
                            <input type="number" name="loader_inactive" placeholder="ØªØ¹Ø¯Ø§Ø¯ ØºÛŒØ±ÙØ¹Ø§Ù„" min="0" onchange="toggleInactiveReason(this, 'loader_reason')">
                            <input type="number" name="loader_hours" placeholder="Ø³Ø§Ø¹Øª Ú©Ø§Ø±" min="0">
                        </div>
                        <input type="text" name="loader_reason" placeholder="Ø¹Ù„Øª ØºÛŒØ±ÙØ¹Ø§Ù„ Ø¨ÙˆØ¯Ù†" style="display:none; margin-top:10px;">
                    </div>
                    
                    <div class="equipment-item">
                        <label>Ø¯ÙˆØ±Ø¨ÛŒÙ† Ù†Ù‚Ø´Ù‡â€ŒØ¨Ø±Ø¯Ø§Ø±ÛŒ</label>
                        <div class="equipment-inputs">
                            <input type="number" name="camera_total" placeholder="ØªØ¹Ø¯Ø§Ø¯ Ú©Ù„" min="0">
                            <input type="number" name="camera_active" placeholder="ØªØ¹Ø¯Ø§Ø¯ ÙØ¹Ø§Ù„" min="0">
                            <input type="number" name="camera_inactive" placeholder="ØªØ¹Ø¯Ø§Ø¯ ØºÛŒØ±ÙØ¹Ø§Ù„" min="0" onchange="toggleInactiveReason(this, 'camera_reason')">
                            <input type="number" name="camera_hours" placeholder="Ø³Ø§Ø¹Øª Ú©Ø§Ø±" min="0">
                        </div>
                        <input type="text" name="camera_reason" placeholder="Ø¹Ù„Øª ØºÛŒØ±ÙØ¹Ø§Ù„ Ø¨ÙˆØ¯Ù†" style="display:none; margin-top:10px;">
                    </div>
                    
                    <div class="equipment-item">
                        <label>Ø¨ÛŒÙ„ Ù…Ú©Ø§Ù†ÛŒÚ©ÛŒ Ú†Ø±Ø® Ù„Ø§Ø³ØªÛŒÚ©ÛŒ</label>
                        <div class="equipment-inputs">
                            <input type="number" name="wheel_excavator_total" placeholder="ØªØ¹Ø¯Ø§Ø¯ Ú©Ù„" min="0">
                            <input type="number" name="wheel_excavator_active" placeholder="ØªØ¹Ø¯Ø§Ø¯ ÙØ¹Ø§Ù„" min="0">
                            <input type="number" name="wheel_excavator_inactive" placeholder="ØªØ¹Ø¯Ø§Ø¯ ØºÛŒØ±ÙØ¹Ø§Ù„" min="0" onchange="toggleInactiveReason(this, 'wheel_excavator_reason')">
                            <input type="number" name="wheel_excavator_hours" placeholder="Ø³Ø§Ø¹Øª Ú©Ø§Ø±" min="0">
                        </div>
                        <input type="text" name="wheel_excavator_reason" placeholder="Ø¹Ù„Øª ØºÛŒØ±ÙØ¹Ø§Ù„ Ø¨ÙˆØ¯Ù†" style="display:none; margin-top:10px;">
                    </div>
                    
                    <div class="equipment-item">
                        <label>Ø¨ÛŒÙ„ Ù…Ú©Ø§Ù†ÛŒÚ©ÛŒ Ú†Ø±Ø® Ø²Ù†Ø¬ÛŒØ±ÛŒ</label>
                        <div class="equipment-inputs">
                            <input type="number" name="track_excavator_total" placeholder="ØªØ¹Ø¯Ø§Ø¯ Ú©Ù„" min="0">
                            <input type="number" name="track_excavator_active" placeholder="ØªØ¹Ø¯Ø§Ø¯ ÙØ¹Ø§Ù„" min="0">
                            <input type="number" name="track_excavator_inactive" placeholder="ØªØ¹Ø¯Ø§Ø¯ ØºÛŒØ±ÙØ¹Ø§Ù„" min="0" onchange="toggleInactiveReason(this, 'track_excavator_reason')">
                            <input type="number" name="track_excavator_hours" placeholder="Ø³Ø§Ø¹Øª Ú©Ø§Ø±" min="0">
                        </div>
                        <input type="text" name="track_excavator_reason" placeholder="Ø¹Ù„Øª ØºÛŒØ±ÙØ¹Ø§Ù„ Ø¨ÙˆØ¯Ù†" style="display:none; margin-top:10px;">
                    </div>
                    
                    <div class="equipment-item">
                        <label>Ø¬Ø±Ø«Ù‚ÛŒÙ„ Ûµ ØªÙ†</label>
                        <div class="equipment-inputs">
                            <input type="number" name="crane_5t_total" placeholder="ØªØ¹Ø¯Ø§Ø¯ Ú©Ù„" min="0">
                            <input type="number" name="crane_5t_active" placeholder="ØªØ¹Ø¯Ø§Ø¯ ÙØ¹Ø§Ù„" min="0">
                            <input type="number" name="crane_5t_inactive" placeholder="ØªØ¹Ø¯Ø§Ø¯ ØºÛŒØ±ÙØ¹Ø§Ù„" min="0" onchange="toggleInactiveReason(this, 'crane_5t_reason')">
                            <input type="number" name="crane_5t_hours" placeholder="Ø³Ø§Ø¹Øª Ú©Ø§Ø±" min="0">
                        </div>
                        <input type="text" name="crane_5t_reason" placeholder="Ø¹Ù„Øª ØºÛŒØ±ÙØ¹Ø§Ù„ Ø¨ÙˆØ¯Ù†" style="display:none; margin-top:10px;">
                    </div>
                    
                    <div class="equipment-item">
                        <label>Ø¬Ø±Ø«Ù‚ÛŒÙ„ Û³ ØªÙ†</label>
                        <div class="equipment-inputs">
                            <input type="number" name="crane_3t_total" placeholder="ØªØ¹Ø¯Ø§Ø¯ Ú©Ù„" min="0">
                            <input type="number" name="crane_3t_active" placeholder="ØªØ¹Ø¯Ø§Ø¯ ÙØ¹Ø§Ù„" min="0">
                            <input type="number" name="crane_3t_inactive" placeholder="ØªØ¹Ø¯Ø§Ø¯ ØºÛŒØ±ÙØ¹Ø§Ù„" min="0" onchange="toggleInactiveReason(this, 'crane_3t_reason')">
                            <input type="number" name="crane_3t_hours" placeholder="Ø³Ø§Ø¹Øª Ú©Ø§Ø±" min="0">
                        </div>
                        <input type="text" name="crane_3t_reason" placeholder="Ø¹Ù„Øª ØºÛŒØ±ÙØ¹Ø§Ù„ Ø¨ÙˆØ¯Ù†" style="display:none; margin-top:10px;">
                    </div>
                    
                    <div class="equipment-item">
                        <label>ÙˆØ§Ù†Øª</label>
                        <div class="equipment-inputs">
                            <input type="number" name="pickup_total" placeholder="ØªØ¹Ø¯Ø§Ø¯ Ú©Ù„" min="0">
                            <input type="number" name="pickup_active" placeholder="ØªØ¹Ø¯Ø§Ø¯ ÙØ¹Ø§Ù„" min="0">
                            <input type="number" name="pickup_inactive" placeholder="ØªØ¹Ø¯Ø§Ø¯ ØºÛŒØ±ÙØ¹Ø§Ù„" min="0" onchange="toggleInactiveReason(this, 'pickup_reason')">
                            <input type="number" name="pickup_hours" placeholder="Ø³Ø§Ø¹Øª Ú©Ø§Ø±" min="0">
                        </div>
                        <input type="text" name="pickup_reason" placeholder="Ø¹Ù„Øª ØºÛŒØ±ÙØ¹Ø§Ù„ Ø¨ÙˆØ¯Ù†" style="display:none; margin-top:10px;">
                    </div>
                    
                    <div class="equipment-item">
                        <label>ØªØ±Ø§Ú© Ù…ÛŒÚ©Ø³Ø±</label>
                        <div class="equipment-inputs">
                            <input type="number" name="mixer_truck_total" placeholder="ØªØ¹Ø¯Ø§Ø¯ Ú©Ù„" min="0">
                            <input type="number" name="mixer_truck_active" placeholder="ØªØ¹Ø¯Ø§Ø¯ ÙØ¹Ø§Ù„" min="0">
                            <input type="number" name="mixer_truck_inactive" placeholder="ØªØ¹Ø¯Ø§Ø¯ ØºÛŒØ±ÙØ¹Ø§Ù„" min="0" onchange="toggleInactiveReason(this, 'mixer_truck_reason')">
                            <input type="number" name="mixer_truck_hours" placeholder="Ø³Ø§Ø¹Øª Ú©Ø§Ø±" min="0">
                        </div>
                        <input type="text" name="mixer_truck_reason" placeholder="Ø¹Ù„Øª ØºÛŒØ±ÙØ¹Ø§Ù„ Ø¨ÙˆØ¯Ù†" style="display:none; margin-top:10px;">
                    </div>
                    
                    <div class="equipment-item">
                        <label>ØªØ±Ø§Ú©ØªÙˆØ±</label>
                        <div class="equipment-inputs">
                            <input type="number" name="tractor_total" placeholder="ØªØ¹Ø¯Ø§Ø¯ Ú©Ù„" min="0">
                            <input type="number" name="tractor_active" placeholder="ØªØ¹Ø¯Ø§Ø¯ ÙØ¹Ø§Ù„" min="0">
                            <input type="number" name="tractor_inactive" placeholder="ØªØ¹Ø¯Ø§Ø¯ ØºÛŒØ±ÙØ¹Ø§Ù„" min="0" onchange="toggleInactiveReason(this, 'tractor_reason')">
                            <input type="number" name="tractor_hours" placeholder="Ø³Ø§Ø¹Øª Ú©Ø§Ø±" min="0">
                        </div>
                        <input type="text" name="tractor_reason" placeholder="Ø¹Ù„Øª ØºÛŒØ±ÙØ¹Ø§Ù„ Ø¨ÙˆØ¯Ù†" style="display:none; margin-top:10px;">
                    </div>
                    
                    <div class="equipment-item">
                        <label>Ú˜Ù†Ø±Ø§ØªÙˆØ±</label>
                        <div class="equipment-inputs">
                            <input type="number" name="generator_total" placeholder="ØªØ¹Ø¯Ø§Ø¯ Ú©Ù„" min="0">
                            <input type="number" name="generator_active" placeholder="ØªØ¹Ø¯Ø§Ø¯ ÙØ¹Ø§Ù„" min="0">
                            <input type="number" name="generator_inactive" placeholder="ØªØ¹Ø¯Ø§Ø¯ ØºÛŒØ±ÙØ¹Ø§Ù„" min="0" onchange="toggleInactiveReason(this, 'generator_reason')">
                            <input type="number" name="generator_hours" placeholder="Ø³Ø§Ø¹Øª Ú©Ø§Ø±" min="0">
                        </div>
                        <input type="text" name="generator_reason" placeholder="Ø¹Ù„Øª ØºÛŒØ±ÙØ¹Ø§Ù„ Ø¨ÙˆØ¯Ù†" style="display:none; margin-top:10px;">
                    </div>
                    
                    <div class="equipment-item">
                        <label>ØªØ§Ù†Ú©Ø± Ø¢Ø¨â€ŒÙ¾Ø§Ø´</label>
                        <div class="equipment-inputs">
                            <input type="number" name="water_tanker_total" placeholder="ØªØ¹Ø¯Ø§Ø¯ Ú©Ù„" min="0">
                            <input type="number" name="water_tanker_active" placeholder="ØªØ¹Ø¯Ø§Ø¯ ÙØ¹Ø§Ù„" min="0">
                            <input type="number" name="water_tanker_inactive" placeholder="ØªØ¹Ø¯Ø§Ø¯ ØºÛŒØ±ÙØ¹Ø§Ù„" min="0" onchange="toggleInactiveReason(this, 'water_tanker_reason')">
                            <input type="number" name="water_tanker_hours" placeholder="Ø³Ø§Ø¹Øª Ú©Ø§Ø±" min="0">
                        </div>
                        <input type="text" name="water_tanker_reason" placeholder="Ø¹Ù„Øª ØºÛŒØ±ÙØ¹Ø§Ù„ Ø¨ÙˆØ¯Ù†" style="display:none; margin-top:10px;">
                    </div>
                </div>
            </div>

            <!-- Ù…Ø±Ø­Ù„Ù‡ 5: Ù…ØµØ§Ù„Ø­ Ù…ØµØ±ÙÛŒ -->
            <div class="form-step">
                <h2>Ù…Ø±Ø­Ù„Ù‡ Ûµ: Ù…ØµØ§Ù„Ø­ Ù…ØµØ±ÙÛŒ</h2>

                <div class="form-row">
                    <div class="card">
                        <h3>Ø³ÛŒÙ…Ø§Ù†</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Ù…Ù‚Ø¯Ø§Ø± ÙˆØ§Ø±Ø¯Ù‡ (Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…):</label>
                                <input type="number" name="cement_received" min="0" step="100">
                            </div>
                            <div class="form-group">
                                <label>Ù…Ù‚Ø¯Ø§Ø± Ù…ØµØ±ÙÛŒ (Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…):</label>
                                <input type="number" name="cement_consumed" min="0" step="100">
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <h3>Ù…Ø§Ø³Ù‡</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Ù…Ù‚Ø¯Ø§Ø± ÙˆØ§Ø±Ø¯Ù‡ (Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…):</label>
                                <input type="number" name="sand_received" min="0" step="100">
                            </div>
                            <div class="form-group">
                                <label>Ù…Ù‚Ø¯Ø§Ø± Ù…ØµØ±ÙÛŒ (Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…):</label>
                                <input type="number" name="sand_consumed" min="0" step="100">
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <h3>Ú¯Ú†</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Ù…Ù‚Ø¯Ø§Ø± ÙˆØ§Ø±Ø¯Ù‡ (Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…):</label>
                                <input type="number" name="plaster_received" min="0" step="100">
                            </div>
                            <div class="form-group">
                                <label>Ù…Ù‚Ø¯Ø§Ø± Ù…ØµØ±ÙÛŒ (Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…):</label>
                                <input type="number" name="plaster_consumed" min="0" step="100">
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <h3>Ø¨Ù„ÙˆÚ© Ø³ÛŒÙ…Ø§Ù†</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Ù…Ù‚Ø¯Ø§Ø± ÙˆØ§Ø±Ø¯Ù‡ (Ø¹Ø¯Ø¯):</label>
                                <input type="number" name="cement_block_received" min="0" step="10">
                            </div>
                            <div class="form-group">
                                <label>Ù…Ù‚Ø¯Ø§Ø± Ù…ØµØ±ÙÛŒ (Ø¹Ø¯Ø¯):</label>
                                <input type="number" name="cement_block_consumed" min="0" step="10">
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <h3>Ù…ÛŒÙ„Ú¯Ø±Ø¯ Û¶</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Ù…Ù‚Ø¯Ø§Ø± ÙˆØ§Ø±Ø¯Ù‡ (Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…):</label>
                                <input type="number" name="rebar6_received" min="0" step="100">
                            </div>
                            <div class="form-group">
                                <label>Ù…Ù‚Ø¯Ø§Ø± Ù…ØµØ±ÙÛŒ (Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…):</label>
                                <input type="number" name="rebar6_consumed" min="0" step="100">
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <h3>Ù…ÛŒÙ„Ú¯Ø±Ø¯ Û¸</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Ù…Ù‚Ø¯Ø§Ø± ÙˆØ§Ø±Ø¯Ù‡ (Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…):</label>
                                <input type="number" name="rebar8_received" min="0" step="100">
                            </div>
                            <div class="form-group">
                                <label>Ù…Ù‚Ø¯Ø§Ø± Ù…ØµØ±ÙÛŒ (Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…):</label>
                                <input type="number" name="rebar8_consumed" min="0" step="100">
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <h3>Ø³ÛŒÙ… Ø¢Ø±Ù…Ø§ØªÙˆØ± Ø¨Ù†Ø¯ÛŒ</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Ù…Ù‚Ø¯Ø§Ø± ÙˆØ§Ø±Ø¯Ù‡ (Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…):</label>
                                <input type="number" name="rebar_wire_received" min="0" step="100">
                            </div>
                            <div class="form-group">
                                <label>Ù…Ù‚Ø¯Ø§Ø± Ù…ØµØ±ÙÛŒ (Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…):</label>
                                <input type="number" name="rebar_wire_consumed" min="0" step="100">
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <h3>Ø¢Ø¨</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Ù…Ù‚Ø¯Ø§Ø± ÙˆØ§Ø±Ø¯Ù‡ (Ù„ÛŒØªØ±):</label>
                                <input type="number" name="water_received" min="0" step="100">
                            </div>
                            <div class="form-group">
                                <label>Ù…Ù‚Ø¯Ø§Ø± Ù…ØµØ±ÙÛŒ (Ù„ÛŒØªØ±):</label>
                                <input type="number" name="water_consumed" min="0" step="100">
                            </div>
                        </div>
                    </div>
                </div>
            </div>


            <!-- Ù…Ø±Ø­Ù„Ù‡ 6: Ø´Ø±Ø­ Ø¹Ù…Ù„ÛŒØ§Øª -->
            <div class="form-step">
                <h2>Ù…Ø±Ø­Ù„Ù‡ Û¶: Ø´Ø±Ø­ Ø¹Ù…Ù„ÛŒØ§Øª</h2>
                
                <div class="card">
                    <h3>ğŸ”¹ ØªØ¬Ù‡ÛŒØ² Ø³Ø§Ø®ØªÚ¯Ø§Ù‡</h3>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <label>Ø§ÛŒØ¬Ø§Ø¯ Ø¬Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø¯Ø³ØªØ±Ø³ÛŒ Ùˆ Ù†Ù‚Ø´Ù‡â€ŒØ¨Ø±Ø¯Ø§Ø±ÛŒ Ø§ÙˆÙ„ÛŒÙ‡</label>
                            <input type="checkbox" name="site_prep_road" onchange="toggleSubInputs(this, 'site_prep_road_inputs')">
                        </div>
                        <div class="sub-inputs" id="site_prep_road_inputs">
                            <input type="text" name="site_prep_road_unit" placeholder="ÙˆØ§Ø­Ø¯">
                            <input type="number" name="site_prep_road_total" placeholder="Ø­Ø¬Ù… Ú©Ù„" min="0">
                            <input type="number" name="site_prep_road_today" placeholder="Ø­Ø¬Ù… Ø§Ù…Ø±ÙˆØ²" min="0">
                        </div>
                        <div class="description-field" id="site_prep_road_desc">
                            <textarea name="site_prep_road_description" placeholder="ØªÙˆØ¶ÛŒØ­Ø§Øª ØªÚ©Ù…ÛŒÙ„ÛŒ Ø¯Ø± ØµÙˆØ±Øª Ù†ÛŒØ§Ø²..."></textarea>
                        </div>
                        
                        <div class="checkbox-item">
                            <label>Ø§Ø³ØªÙ‚Ø±Ø§Ø± Ù…Ø§Ø´ÛŒÙ†â€ŒØ¢Ù„Ø§ØªØŒ ØªØ¬Ù‡ÛŒØ²Ø§Øª Ùˆ Ø§Ø³Ú©Ø§Ù† Ù†ÛŒØ±ÙˆÙ‡Ø§</label>
                            <input type="checkbox" name="site_prep_equipment" onchange="toggleSubInputs(this, 'site_prep_equipment_inputs')">
                        </div>
                        <div class="sub-inputs" id="site_prep_equipment_inputs">
                            <input type="text" name="site_prep_equipment_unit" placeholder="ÙˆØ§Ø­Ø¯">
                            <input type="number" name="site_prep_equipment_total" placeholder="Ø­Ø¬Ù… Ú©Ù„" min="0">
                            <input type="number" name="site_prep_equipment_today" placeholder="Ø­Ø¬Ù… Ø§Ù…Ø±ÙˆØ²" min="0">
                        </div>
                        <div class="description-field" id="site_prep_equipment_desc">
                            <textarea name="site_prep_equipment_description" placeholder="ØªÙˆØ¶ÛŒØ­Ø§Øª ØªÚ©Ù…ÛŒÙ„ÛŒ Ø¯Ø± ØµÙˆØ±Øª Ù†ÛŒØ§Ø²..."></textarea>
                        </div>
                        
                        <div class="checkbox-item">
                            <label>Ù†Ù‚Ø´Ù‡â€ŒØ¨Ø±Ø¯Ø§Ø±ÛŒ Ø¬Ù‡Øª ØªÙˆÙ¾ÙˆÚ¯Ø±Ø§ÙÛŒØŒ ØªØ³Ø·ÛŒØ­ Ø²Ù…ÛŒÙ†ØŒ Ù…Ø¬ÙˆØ² Ùˆ Ù†ØµØ¨ Ù¾Ø§ÛŒÙ‡â€ŒÙ‡Ø§</label>
                            <input type="checkbox" name="site_prep_survey" onchange="toggleSubInputs(this, 'site_prep_survey_inputs')">
                        </div>
                        <div class="sub-inputs" id="site_prep_survey_inputs">
                            <input type="text" name="site_prep_survey_unit" placeholder="ÙˆØ§Ø­Ø¯">
                            <input type="number" name="site_prep_survey_total" placeholder="Ø­Ø¬Ù… Ú©Ù„" min="0">
                            <input type="number" name="site_prep_survey_today" placeholder="Ø­Ø¬Ù… Ø§Ù…Ø±ÙˆØ²" min="0">
                        </div>
                        <div class="description-field" id="site_prep_survey_desc">
                            <textarea name="site_prep_survey_description" placeholder="ØªÙˆØ¶ÛŒØ­Ø§Øª ØªÚ©Ù…ÛŒÙ„ÛŒ Ø¯Ø± ØµÙˆØ±Øª Ù†ÛŒØ§Ø²..."></textarea>
                        </div>
                        <div class="checkbox-item">
                            <label>Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¬Ø§ÛŒÚ¯Ø§Ù‡ Ø§Ø³ØªÙ‚Ø±Ø§Ø± Ú©Ø§Ù†Ú©Ø³ Ùˆ ØªØ§Ù†Ú©Ø± Ùˆ Ø¯Ø±Ø¨ ÙˆØ±ÙˆØ¯ÛŒ Ø³Ø§Ø®ØªÚ¯Ø§Ù‡</label>
                            <input type="checkbox" name="site_prep_container" onchange="toggleSubInputs(this, 'site_prep_container_inputs')">
                        </div>
                        <div class="sub-inputs" id="site_prep_container_inputs">
                            <input type="text" name="site_prep_container_unit" placeholder="ÙˆØ§Ø­Ø¯">
                            <input type="number" name="site_prep_container_total" placeholder="Ø­Ø¬Ù… Ú©Ù„" min="0">
                            <input type="number" name="site_prep_container_today" placeholder="Ø­Ø¬Ù… Ø§Ù…Ø±ÙˆØ²" min="0">
                        </div>
                        <div class="description-field" id="site_prep_container_desc">
                            <textarea name="site_prep_container_description" placeholder="ØªÙˆØ¶ÛŒØ­Ø§Øª ØªÚ©Ù…ÛŒÙ„ÛŒ Ø¯Ø± ØµÙˆØ±Øª Ù†ÛŒØ§Ø²..."></textarea>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3>ğŸ”¹ Ø­ØµØ§Ø± Ø¯ÙˆØ± Ø³Ø§ÛŒØª</h3>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <label>Ø­ÙØ§Ø±ÛŒ Ù¾Ø§ÛŒÙ‡ ÙÙ†Ø³</label>
                            <input type="checkbox" name="fence_excavation" onchange="toggleSubInputs(this, 'fence_excavation_inputs')">
                        </div>
                        <div class="sub-inputs" id="fence_excavation_inputs">
                            <input type="text" name="fence_excavation_unit" placeholder="ÙˆØ§Ø­Ø¯">
                            <input type="number" name="fence_excavation_total" placeholder="Ø­Ø¬Ù… Ú©Ù„" min="0">
                            <input type="number" name="fence_excavation_today" placeholder="Ø­Ø¬Ù… Ø§Ù…Ø±ÙˆØ²" min="0">
                        </div>
                        <div class="description-field" id="fence_excavation_desc">
                            <textarea name="fence_excavation_description" placeholder="ØªÙˆØ¶ÛŒØ­Ø§Øª ØªÚ©Ù…ÛŒÙ„ÛŒ Ø¯Ø± ØµÙˆØ±Øª Ù†ÛŒØ§Ø²..."></textarea>
                        </div>
                        
                        <div class="checkbox-item">
                            <label>Ù†ØµØ¨ Ù¾Ø§ÛŒÙ‡ Ùˆ Ø±Ø§Ø¯</label>
                            <input type="checkbox" name="fence_installation" onchange="toggleSubInputs(this, 'fence_installation_inputs')">
                        </div>
                        <div class="sub-inputs" id="fence_installation_inputs">
                            <input type="text" name="fence_installation_unit" placeholder="ÙˆØ§Ø­Ø¯">
                            <input type="number" name="fence_installation_total" placeholder="Ø­Ø¬Ù… Ú©Ù„" min="0">
                            <input type="number" name="fence_installation_today" placeholder="Ø­Ø¬Ù… Ø§Ù…Ø±ÙˆØ²" min="0">
                        </div>
                        <div class="description-field" id="fence_installation_desc">
                            <textarea name="fence_installation_description" placeholder="ØªÙˆØ¶ÛŒØ­Ø§Øª ØªÚ©Ù…ÛŒÙ„ÛŒ Ø¯Ø± ØµÙˆØ±Øª Ù†ÛŒØ§Ø²..."></textarea>
                        </div>
                        
                        <div class="checkbox-item">
                            <label>Ø¨ØªÙ†â€ŒØ±ÛŒØ²ÛŒ Ùˆ Ú¯Ø±ÙˆØªÛŒÙ†Ú¯</label>
                            <input type="checkbox" name="fence_concrete" onchange="toggleSubInputs(this, 'fence_concrete_inputs')">
                        </div>
                        <div class="sub-inputs" id="fence_concrete_inputs">
                            <input type="text" name="fence_concrete_unit" placeholder="ÙˆØ§Ø­Ø¯">
                            <input type="number" name="fence_concrete_total" placeholder="Ø­Ø¬Ù… Ú©Ù„" min="0">
                            <input type="number" name="fence_concrete_today" placeholder="Ø­Ø¬Ù… Ø§Ù…Ø±ÙˆØ²" min="0">
                        </div>
                        <div class="description-field" id="fence_concrete_desc">
                            <textarea name="fence_concrete_description" placeholder="ØªÙˆØ¶ÛŒØ­Ø§Øª ØªÚ©Ù…ÛŒÙ„ÛŒ Ø¯Ø± ØµÙˆØ±Øª Ù†ÛŒØ§Ø²..."></textarea>
                        </div>
                        
                        <div class="checkbox-item">
                            <label>Ù†ØµØ¨ ØªÙˆØ±ÛŒØŒ Ø³ÛŒÙ… Ø®Ø§Ø±Ø¯Ø§Ø± Ùˆ Ø±Ø§Ø¯</label>
                            <input type="checkbox" name="fence_mesh" onchange="toggleSubInputs(this, 'fence_mesh_inputs')">
                        </div>
                        <div class="sub-inputs" id="fence_mesh_inputs">
                            <input type="text" name="fence_mesh_unit" placeholder="ÙˆØ§Ø­Ø¯">
                            <input type="number" name="fence_mesh_total" placeholder="Ø­Ø¬Ù… Ú©Ù„" min="0">
                            <input type="number" name="fence_mesh_today" placeholder="Ø­Ø¬Ù… Ø§Ù…Ø±ÙˆØ²" min="0">
                        </div>
                        <div class="description-field" id="fence_mesh_desc">
                            <textarea name="fence_mesh_description" placeholder="ØªÙˆØ¶ÛŒØ­Ø§Øª ØªÚ©Ù…ÛŒÙ„ÛŒ Ø¯Ø± ØµÙˆØ±Øª Ù†ÛŒØ§Ø²..."></textarea>
                        </div>
                        
                        <div class="checkbox-item">
                            <label>Ù†ØµØ¨ Ø¯Ø±Ø¨ Ø³Ø§ÛŒØª Ù†ÛŒØ±ÙˆÚ¯Ø§Ù‡</label>
                            <input type="checkbox" name="fence_gate" onchange="toggleSubInputs(this, 'fence_gate_inputs')">
                        </div>
                        <div class="sub-inputs" id="fence_gate_inputs">
                            <input type="text" name="fence_gate_unit" placeholder="ÙˆØ§Ø­Ø¯">
                            <input type="number" name="fence_gate_total" placeholder="Ø­Ø¬Ù… Ú©Ù„" min="0">
                            <input type="number" name="fence_gate_today" placeholder="Ø­Ø¬Ù… Ø§Ù…Ø±ÙˆØ²" min="0">
                        </div>
                        <div class="description-field" id="fence_gate_desc">
                            <textarea name="fence_gate_description" placeholder="ØªÙˆØ¶ÛŒØ­Ø§Øª ØªÚ©Ù…ÛŒÙ„ÛŒ Ø¯Ø± ØµÙˆØ±Øª Ù†ÛŒØ§Ø²..."></textarea>
                        </div>
                        
                        <div class="checkbox-item">
                            <label>Ø§Ø­Ø¯Ø§Ø« ÙÙˆÙ†Ø¯Ø§Ø³ÛŒÙˆÙ† Ú¯Ø§Ù†â€ŒØ¨Ø§Ú©Ø³ØŒ Ø§ÛŒÙ†ÙˆØ±ØªØ± Ùˆ STS</label>
                            <input type="checkbox" name="fence_foundation" onchange="toggleSubInputs(this, 'fence_foundation_inputs')">
                        </div>
                        <div class="sub-inputs" id="fence_foundation_inputs">
                            <input type="text" name="fence_foundation_unit" placeholder="ÙˆØ§Ø­Ø¯">
                            <input type="number" name="fence_foundation_total" placeholder="Ø­Ø¬Ù… Ú©Ù„" min="0">
                            <input type="number" name="fence_foundation_today" placeholder="Ø­Ø¬Ù… Ø§Ù…Ø±ÙˆØ²" min="0">
                        </div>
                        <div class="description-field" id="fence_foundation_desc">
                            <textarea name="fence_foundation_description" placeholder="ØªÙˆØ¶ÛŒØ­Ø§Øª ØªÚ©Ù…ÛŒÙ„ÛŒ Ø¯Ø± ØµÙˆØ±Øª Ù†ÛŒØ§Ø²..."></textarea>
                        </div>
                        
                        <div class="checkbox-item">
                            <label>Ù†Ù‚Ø´Ù‡â€ŒØ¨Ø±Ø¯Ø§Ø±ÛŒ</label>
                            <input type="checkbox" name="fence_survey" onchange="toggleSubInputs(this, 'fence_survey_inputs')">
                        </div>
                        <div class="sub-inputs" id="fence_survey_inputs">
                            <input type="text" name="fence_survey_unit" placeholder="ÙˆØ§Ø­Ø¯">
                            <input type="number" name="fence_survey_total" placeholder="Ø­Ø¬Ù… Ú©Ù„" min="0">
                            <input type="number" name="fence_survey_today" placeholder="Ø­Ø¬Ù… Ø§Ù…Ø±ÙˆØ²" min="0">
                        </div>
                        <div class="description-field" id="fence_survey_desc">
                            <textarea name="fence_survey_description" placeholder="ØªÙˆØ¶ÛŒØ­Ø§Øª ØªÚ©Ù…ÛŒÙ„ÛŒ Ø¯Ø± ØµÙˆØ±Øª Ù†ÛŒØ§Ø²..."></textarea>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3>ğŸ”¹ Ø¹Ù…Ù„ÛŒØ§Øª Ø¹Ù…Ø±Ø§Ù†ÛŒ</h3>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <label>Ø­ÙØ§Ø±ÛŒ Ù¾Ø§ÛŒÙ‡ Ø³Ø§Ø²Ù‡</label>
                            <input type="checkbox" name="civil_excavation" onchange="toggleSubInputs(this, 'civil_excavation_inputs')">
                        </div>
                        <div class="sub-inputs" id="civil_excavation_inputs">
                            <input type="text" name="civil_excavation_unit" placeholder="ÙˆØ§Ø­Ø¯">
                            <input type="number" name="civil_excavation_total" placeholder="Ø­Ø¬Ù… Ú©Ù„" min="0">
                            <input type="number" name="civil_excavation_today" placeholder="Ø­Ø¬Ù… Ø§Ù…Ø±ÙˆØ²" min="0">
                        </div>
                        <div class="description-field" id="civil_excavation_desc">
                            <textarea name="civil_excavation_description" placeholder="ØªÙˆØ¶ÛŒØ­Ø§Øª ØªÚ©Ù…ÛŒÙ„ÛŒ Ø¯Ø± ØµÙˆØ±Øª Ù†ÛŒØ§Ø²..."></textarea>
                        </div>
                        
                        <div class="checkbox-item">
                            <label>Ù†ØµØ¨ Ù¾Ø§ÛŒÙ‡ Ø¨Ø§ ÙÛŒÚ©Ø³Ø±</label>
                            <input type="checkbox" name="civil_foundation" onchange="toggleSubInputs(this, 'civil_foundation_inputs')">
                        </div>
                        <div class="sub-inputs" id="civil_foundation_inputs">
                            <input type="text" name="civil_foundation_unit" placeholder="ÙˆØ§Ø­Ø¯">
                            <input type="number" name="civil_foundation_total" placeholder="Ø­Ø¬Ù… Ú©Ù„" min="0">
                            <input type="number" name="civil_foundation_today" placeholder="Ø­Ø¬Ù… Ø§Ù…Ø±ÙˆØ²" min="0">
                        </div>
                        <div class="description-field" id="civil_foundation_desc">
                            <textarea name="civil_foundation_description" placeholder="ØªÙˆØ¶ÛŒØ­Ø§Øª ØªÚ©Ù…ÛŒÙ„ÛŒ Ø¯Ø± ØµÙˆØ±Øª Ù†ÛŒØ§Ø²..."></textarea>
                        </div>
                        
                        <div class="checkbox-item">
                            <label>Ø¨ØªÙ†â€ŒØ±ÛŒØ²ÛŒ</label>
                            <input type="checkbox" name="civil_concrete" onchange="toggleSubInputs(this, 'civil_concrete_inputs')">
                        </div>
                        <div class="sub-inputs" id="civil_concrete_inputs">
                            <input type="text" name="civil_concrete_unit" placeholder="ÙˆØ§Ø­Ø¯">
                            <input type="number" name="civil_concrete_total" placeholder="Ø­Ø¬Ù… Ú©Ù„" min="0">
                            <input type="number" name="civil_concrete_today" placeholder="Ø­Ø¬Ù… Ø§Ù…Ø±ÙˆØ²" min="0">
                        </div>
                        <div class="description-field" id="civil_concrete_desc">
                            <textarea name="civil_concrete_description" placeholder="ØªÙˆØ¶ÛŒØ­Ø§Øª ØªÚ©Ù…ÛŒÙ„ÛŒ Ø¯Ø± ØµÙˆØ±Øª Ù†ÛŒØ§Ø²..."></textarea>
                        </div>
                        
                        <div class="checkbox-item">
                            <label>Ù†ØµØ¨ Ø±ÛŒÙ„ØŒ ØªÛŒØ± Ùˆ Ø¨Ø§Ù„â€ŒÙ¾Ù„ÛŒØª</label>
                            <input type="checkbox" name="civil_rail" onchange="toggleSubInputs(this, 'civil_rail_inputs')">
                        </div>
                        <div class="sub-inputs" id="civil_rail_inputs">
                            <input type="text" name="civil_rail_unit" placeholder="ÙˆØ§Ø­Ø¯">
                            <input type="number" name="civil_rail_total" placeholder="Ø­Ø¬Ù… Ú©Ù„" min="0">
                            <input type="number" name="civil_rail_today" placeholder="Ø­Ø¬Ù… Ø§Ù…Ø±ÙˆØ²" min="0">
                        </div>
                        <div class="description-field" id="civil_rail_desc">
                            <textarea name="civil_rail_description" placeholder="ØªÙˆØ¶ÛŒØ­Ø§Øª ØªÚ©Ù…ÛŒÙ„ÛŒ Ø¯Ø± ØµÙˆØ±Øª Ù†ÛŒØ§Ø²..."></textarea>
                        </div>
                        
                        <div class="checkbox-item">
                            <label>Ø¨Ø±ÛŒÙ„ÛŒÙ†Ú¯</label>
                            <input type="checkbox" name="civil_drilling" onchange="toggleSubInputs(this, 'civil_drilling_inputs')">
                        </div>
                        <div class="sub-inputs" id="civil_drilling_inputs">
                            <input type="text" name="civil_drilling_unit" placeholder="ÙˆØ§Ø­Ø¯">
                            <input type="number" name="civil_drilling_total" placeholder="Ø­Ø¬Ù… Ú©Ù„" min="0">
                            <input type="number" name="civil_drilling_today" placeholder="Ø­Ø¬Ù… Ø§Ù…Ø±ÙˆØ²" min="0">
                        </div>
                        <div class="description-field" id="civil_drilling_desc">
                            <textarea name="civil_drilling_description" placeholder="ØªÙˆØ¶ÛŒØ­Ø§Øª ØªÚ©Ù…ÛŒÙ„ÛŒ Ø¯Ø± ØµÙˆØ±Øª Ù†ÛŒØ§Ø²..."></textarea>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3>ğŸ”¹ Ø¹Ù…Ù„ÛŒØ§Øª Ø¨Ø±Ù‚ÛŒ</h3>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <label>Ù†ØµØ¨ Ù¾Ù†Ù„</label>
                            <input type="checkbox" name="electrical_panel" onchange="toggleSubInputs(this, 'electrical_panel_inputs')">
                        </div>
                        <div class="sub-inputs" id="electrical_panel_inputs">
                            <input type="text" name="electrical_panel_unit" placeholder="ÙˆØ§Ø­Ø¯">
                            <input type="number" name="electrical_panel_total" placeholder="Ø­Ø¬Ù… Ú©Ù„" min="0">
                            <input type="number" name="electrical_panel_today" placeholder="Ø­Ø¬Ù… Ø§Ù…Ø±ÙˆØ²" min="0">
                        </div>
                        <div class="description-field" id="electrical_panel_desc">
                            <textarea name="electrical_panel_description" placeholder="ØªÙˆØ¶ÛŒØ­Ø§Øª ØªÚ©Ù…ÛŒÙ„ÛŒ Ø¯Ø± ØµÙˆØ±Øª Ù†ÛŒØ§Ø²..."></textarea>
                        </div>
                        
                        <div class="checkbox-item">
                            <label>Ú©Ø§Ø¨Ù„â€ŒÚ©Ø´ÛŒ DC</label>
                            <input type="checkbox" name="electrical_dc_cable" onchange="toggleSubInputs(this, 'electrical_dc_cable_inputs')">
                        </div>
                        <div class="sub-inputs" id="electrical_dc_cable_inputs">
                            <input type="text" name="electrical_dc_cable_unit" placeholder="ÙˆØ§Ø­Ø¯">
                            <input type="number" name="electrical_dc_cable_total" placeholder="Ø­Ø¬Ù… Ú©Ù„" min="0">
                            <input type="number" name="electrical_dc_cable_today" placeholder="Ø­Ø¬Ù… Ø§Ù…Ø±ÙˆØ²" min="0">
                        </div>
                        <div class="description-field" id="electrical_dc_cable_desc">
                            <textarea name="electrical_dc_cable_description" placeholder="ØªÙˆØ¶ÛŒØ­Ø§Øª ØªÚ©Ù…ÛŒÙ„ÛŒ Ø¯Ø± ØµÙˆØ±Øª Ù†ÛŒØ§Ø²..."></textarea>
                        </div>
                        
                        <div class="checkbox-item">
                            <label>Ø­ÙØ§Ø±ÛŒØŒ Ù„ÙˆÙ„Ù‡â€ŒÚ©Ø´ÛŒ Ùˆ Ú©Ø§Ø¨Ù„â€ŒÚ©Ø´ÛŒ</label>
                            <input type="checkbox" name="electrical_conduit" onchange="toggleSubInputs(this, 'electrical_conduit_inputs')">
                        </div>
                        <div class="sub-inputs" id="electrical_conduit_inputs">
                            <input type="text" name="electrical_conduit_unit" placeholder="ÙˆØ§Ø­Ø¯">
                            <input type="number" name="electrical_conduit_total" placeholder="Ø­Ø¬Ù… Ú©Ù„" min="0">
                            <input type="number" name="electrical_conduit_today" placeholder="Ø­Ø¬Ù… Ø§Ù…Ø±ÙˆØ²" min="0">
                        </div>
                        <div class="description-field" id="electrical_conduit_desc">
                            <textarea name="electrical_conduit_description" placeholder="ØªÙˆØ¶ÛŒØ­Ø§Øª ØªÚ©Ù…ÛŒÙ„ÛŒ Ø¯Ø± ØµÙˆØ±Øª Ù†ÛŒØ§Ø²..."></textarea>
                        </div>
                        
                        <div class="checkbox-item">
                            <label>Ù†ØµØ¨ Ø§ÛŒÙ†ÙˆØ±ØªØ±</label>
                            <input type="checkbox" name="electrical_inverter" onchange="toggleSubInputs(this, 'electrical_inverter_inputs')">
                        </div>
                        <div class="sub-inputs" id="electrical_inverter_inputs">
                            <input type="text" name="electrical_inverter_unit" placeholder="ÙˆØ§Ø­Ø¯">
                            <input type="number" name="electrical_inverter_total" placeholder="Ø­Ø¬Ù… Ú©Ù„" min="0">
                            <input type="number" name="electrical_inverter_today" placeholder="Ø­Ø¬Ù… Ø§Ù…Ø±ÙˆØ²" min="0">
                        </div>
                        <div class="description-field" id="electrical_inverter_desc">
                            <textarea name="electrical_inverter_description" placeholder="ØªÙˆØ¶ÛŒØ­Ø§Øª ØªÚ©Ù…ÛŒÙ„ÛŒ Ø¯Ø± ØµÙˆØ±Øª Ù†ÛŒØ§Ø²..."></textarea>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <h3>ğŸ”¹ ÙØ¹Ø§Ù„ÛŒØª Ù…ØªÙØ±Ù‚Ù‡</h3>
                    <div class="form-group">
                        <label for="miscellaneous_activities">Ø³Ø§ÛŒØ± ÙØ¹Ø§Ù„ÛŒØªâ€ŒÙ‡Ø§ Ùˆ ØªÙˆØ¶ÛŒØ­Ø§Øª:</label>
                        <textarea 
                            id="miscellaneous_activities" 
                            name="miscellaneous_activities" 
                            rows="6" 
                            style="resize: vertical; min-height: 120px;"></textarea>
                    </div>
                </div>

                <div class="card">
                    <h3>ğŸ”¹ Ù…Ø´Ú©Ù„Ø§Øª Ùˆ Ù…ÙˆØ§Ù†Ø¹</h3>
                    <div class="form-group">
                        <label for="problems_obstacles">Ù…Ø´Ú©Ù„Ø§Øª Ùˆ Ù…ÙˆØ§Ù†Ø¹ Ù¾ÛŒØ´â€ŒØ¢Ù…Ø¯Ù‡:</label>
                        <textarea 
                            id="problems_obstacles" 
                            name="problems_obstacles" 
                            rows="6" 
                            placeholder="Ù…Ø´Ú©Ù„Ø§ØªØŒ Ù…ÙˆØ§Ù†Ø¹ Ùˆ Ø¹Ù„Ù„ Ø¢Ù†â€ŒÙ‡Ø§ Ø±Ø§ Ø´Ø±Ø­ Ø¯Ù‡ÛŒØ¯..."
                            style="resize: vertical; min-height: 120px;"></textarea>
                    </div>
                </div>
            </div>

            <!-- Ù…Ø±Ø­Ù„Ù‡ 7: Ø¢Ù¾Ù„ÙˆØ¯ ØªØµØ§ÙˆÛŒØ± -->
            <div class="form-step">
                <h2>Ù…Ø±Ø­Ù„Ù‡ Û·: Ø¢Ù¾Ù„ÙˆØ¯ ØªØµØ§ÙˆÛŒØ±</h2>
                
               <div class="card">
                    <h3>ğŸ–¼ï¸ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ØªØµØ§ÙˆÛŒØ± Ø³Ø§ÛŒØª</h3>
                    <div class="form-group">
                        <label for="siteImages">Ø§Ù†ØªØ®Ø§Ø¨ ØªØµØ§ÙˆÛŒØ± (Ø­Ø¯Ø§Ú©Ø«Ø± Ûµ ØªØµÙˆÛŒØ±):</label>
                        <input type="file" id="siteImages" name="siteImages" accept="image/*" multiple>
                        <small style="color: #6b7280; font-size: 0.75rem; margin-top: 4px; display: block;">
                            ğŸ’¡ ØªÙˆØ¬Ù‡: ØªØµØ§ÙˆÛŒØ± Ø¨Ø²Ø±Ú¯ØªØ± Ø§Ø² Ûµ Ù…Ú¯Ø§Ø¨Ø§ÛŒØª Ù„Ø·ÙØ§Ù‹ Ø¯Ø± Ø§ÛŒØªØ§ Ø§Ø±Ø³Ø§Ù„ Ú©Ù†ÛŒØ¯
                        </small>
                        <div id="imagePreview" style="margin-top: 20px; display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 10px;"></div>
                    </div>
                </div>
            </div>
        </form>

        <div class="navigation">
            <button type="button" class="btn btn-primary" id="nextBtn" onclick="changeStep(1)">Ø¨Ø¹Ø¯ÛŒ</button>
            <button type="submit" class="btn btn-primary" id="submitBtn" style="display:none;" onclick="submitForm()">Ø§Ø±Ø³Ø§Ù„ Ú¯Ø²Ø§Ø±Ø´</button>
            <button type="button" class="btn btn-secondary" id="prevBtn" onclick="changeStep(-1)">Ù‚Ø¨Ù„ÛŒ</button>
        </div>

        <div class="message" id="message"></div>
    </div>
    <div id="logoutContainer" >
        <button onclick="logout()" class="btn btn-secondary" >
            Ø®Ø±ÙˆØ¬
        </button>
    </div>
    
    <div id="successPage" style="display: none;">
        <div class="container">
            <div class="header">
                <h1>âœ… Ø§Ø±Ø³Ø§Ù„ Ù…ÙˆÙÙ‚ÛŒØªâ€ŒØ¢Ù…ÛŒØ²</h1>
                <p>Ú¯Ø²Ø§Ø±Ø´ Ø±ÙˆØ²Ø§Ù†Ù‡ Ø´Ù…Ø§ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø«Ø¨Øª Ø´Ø¯</p>
            </div>
            
            <div style="text-align: center; padding: 60px 40px;">
                <div style="font-size: 4rem; color: #10b981; margin-bottom: 24px;">ğŸ‰</div>
                <h2 style="color: #1e293b; margin-bottom: 16px;">Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯!</h2>
                <p style="color: #6b7280; font-size: 1.125rem; margin-bottom: 32px;">
                    Ú¯Ø²Ø§Ø±Ø´ Ø±ÙˆØ²Ø§Ù†Ù‡ Ø´Ù…Ø§ Ø¯Ø± Ø³ÛŒØ³ØªÙ… Ø«Ø¨Øª Ú¯Ø±Ø¯ÛŒØ¯ Ùˆ Ø¨Ù‡ ØªÛŒÙ… Ù…Ø±Ø¨ÙˆØ·Ù‡ Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯Ù‡ Ø§Ø³Øª.
                </p>
                
                <div style="background: #f0f9ff; border: 1px solid #bae6fd; border-radius: 8px; padding: 20px; margin: 24px 0;">
                    <p style="color: #0369a1; margin: 0;">
                        ğŸ“‹ Ø´Ù…Ø§Ø±Ù‡ Ø«Ø¨Øª: <strong id="reportId"></strong><br>
                        ğŸ“… ØªØ§Ø±ÛŒØ® Ø§Ø±Ø³Ø§Ù„: <strong id="submitTime"></strong>
                    </p>
                </div>
                
                <button onclick="startNewReport()" class="btn btn-primary" style="margin-top: 24px;">
                    Ø´Ø±ÙˆØ¹ Ú¯Ø²Ø§Ø±Ø´ Ø¬Ø¯ÛŒØ¯
                </button>
            </div>
        </div>
    </div>

    <script>
        let imageFilesList = [];
        // Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ù„Ø§Ú¯ÛŒÙ†
        let currentUser = null;
        const LOGIN_SHEET_URL = 'https://script.google.com/macros/s/AKfycbyMASE23XVAOYM5awfnG-T19rBtQcK0kZxmuiqaDizNlxzWCzip8JTCHQBt4ybr1gY/exec'; // Ø¢ÛŒØ¯ÛŒ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ù„Ø§Ú¯ÛŒÙ†

        // ØªØ§Ø¨Ø¹ Ù„Ø§Ú¯ÛŒÙ†
        async function handleLogin(event) {
            event.preventDefault();
            
            const username = document.getElementById('username').value.trim();
            const password = document.getElementById('password').value.trim();
            const loginBtn = document.getElementById('loginBtn');
            
            if (!username || !password) {
                showLoginMessage('Ù„Ø·ÙØ§Ù‹ Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ Ùˆ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.', 'error');
                return;
            }
            
            // ØºÛŒØ±ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ø¯Ú©Ù…Ù‡ Ùˆ Ù†Ù…Ø§ÛŒØ´ Ø­Ø§Ù„Øª Ù„ÙˆØ¯ÛŒÙ†Ú¯
            loginBtn.disabled = true;
            loginBtn.classList.add('loading');
            showLoginMessage('Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø±Ø±Ø³ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª...', 'info');
            
            try {
                // Ø§Ø±Ø³Ø§Ù„ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¨Ù‡ Google Apps Script
                const response = await fetch(LOGIN_SHEET_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'text/plain;charset=utf-8',
                    },
                    body: JSON.stringify({
                        action: 'login',
                        username: username,
                        password: password
                    })
                });
                
                const result = await response.json();
                
                if (result.success) {
                    // Ù„Ø§Ú¯ÛŒÙ† Ù…ÙˆÙÙ‚
                    currentUser = result.user;
                    localStorage.setItem('currentUser', JSON.stringify(currentUser));
                    
                    showLoginMessage('ÙˆØ±ÙˆØ¯ Ù…ÙˆÙÙ‚ÛŒØªâ€ŒØ¢Ù…ÛŒØ²! Ø¯Ø± Ø­Ø§Ù„ Ø§Ù†ØªÙ‚Ø§Ù„...', 'success');
                    
                    setTimeout(() => {
                        showMainPage();
                    }, 1500);
                    
                } else {
                    // Ù„Ø§Ú¯ÛŒÙ† Ù†Ø§Ù…ÙˆÙÙ‚
                    showLoginMessage(result.message || 'Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ ÛŒØ§ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª.', 'error');
                }
                
            } catch (error) {
                console.error('Login error:', error);
                showLoginMessage('Ø®Ø·Ø§ Ø¯Ø± Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ø³Ø±ÙˆØ±. Ù„Ø·ÙØ§Ù‹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯.', 'error');
            } finally {
                loginBtn.disabled = false;
                loginBtn.classList.remove('loading');
            }
        }

        // Ù†Ù…Ø§ÛŒØ´ Ù¾ÛŒØ§Ù… Ù„Ø§Ú¯ÛŒÙ†
        function showLoginMessage(text, type) {
            const messageDiv = document.getElementById('loginMessage');
            messageDiv.textContent = text;
            messageDiv.className = `message ${type}`;
            messageDiv.style.display = 'block';
            
            setTimeout(() => {
                if (type === 'error') {
                    messageDiv.style.display = 'none';
                }
            }, 5000);
        }

        // Ù†Ù…Ø§ÛŒØ´ ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ Ø¨Ø¹Ø¯ Ø§Ø² Ù„Ø§Ú¯ÛŒÙ†
        function showMainPage() {
            // Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù† ØµÙØ­Ù‡ Ù„Ø§Ú¯ÛŒÙ†
            document.getElementById('loginPage').style.display = 'none';
            document.getElementById('successPage').style.display = 'none';
            
            // Ù†Ù…Ø§ÛŒØ´ ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ
            document.getElementById('mainContainer').style.display = 'block';
            document.getElementById('logoutContainer').style.display = 'block';
            
            // ØªÙ†Ø¸ÛŒÙ… Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø± Ø¯Ø± ÙØ±Ù…
            if (currentUser && currentUser.name) {
                const supervisorSelect = document.getElementById('supervisorName');
                supervisorSelect.value = currentUser.name;
                supervisorSelect.disabled = true;
            }
            
            // Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ Ø¨Ù‡ Ù…Ø±Ø­Ù„Ù‡ Ø§ÙˆÙ„
            currentStep = 1;
            showStep(1);
        }

        // Ø®Ø±ÙˆØ¬ Ø§Ø² Ø³ÛŒØ³ØªÙ…
        function logout() {
            if (confirm('Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø®Ø§Ø±Ø¬ Ø´ÙˆÛŒØ¯ØŸ')) {
                // Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø±
                currentUser = null;
                localStorage.removeItem('currentUser');
                
                // Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ ÙØ±Ù…â€ŒÙ‡Ø§
                document.getElementById('dailyReportForm').reset();
                document.getElementById('loginForm').reset();
                
                // Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ Ù…Ø±Ø§Ø­Ù„
                currentStep = 1;
                
                // Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† ØªÙ…Ø§Ù… sub-inputs
                document.querySelectorAll('.sub-inputs').forEach(sub => {
                    sub.classList.remove('active');
                    sub.querySelectorAll('input').forEach(input => {
                        input.required = false;
                        input.value = '';
                    });
                });
                
                // Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ select supervisor
                const supervisorSelect = document.getElementById('supervisorName');
                supervisorSelect.disabled = false;
                supervisorSelect.value = '';
                
                // Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù† ØªÙ…Ø§Ù… ØµÙØ­Ø§Øª
                document.getElementById('mainContainer').style.display = 'none';
                document.getElementById('logoutContainer').style.display = 'none';
                document.getElementById('successPage').style.display = 'none';
                
                // Ù†Ù…Ø§ÛŒØ´ ØµÙØ­Ù‡ Ù„Ø§Ú¯ÛŒÙ†
                document.getElementById('loginPage').style.display = 'block';
                
                // Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ Ù†Ù…Ø§ÛŒØ´ Ù…Ø±Ø§Ø­Ù„
                showStep(1);
                
                // Ù¾ÛŒØ§Ù… Ø®Ø±ÙˆØ¬
                setTimeout(() => {
                    showLoginMessage('Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø®Ø§Ø±Ø¬ Ø´Ø¯ÛŒØ¯.', 'success');
                }, 300);
            }
        }

        // Ø¨Ù‡Ø¨ÙˆØ¯ ØªØ§Ø¨Ø¹ Ø¨Ø±Ø±Ø³ÛŒ Ù„Ø§Ú¯ÛŒÙ† Ù‚Ø¨Ù„ÛŒ 
        function checkPreviousLogin() {
            const savedUser = localStorage.getItem('currentUser');
            if (savedUser) {
                try {
                    currentUser = JSON.parse(savedUser);
                    showMainPage();
                } catch (error) {
                    console.error('Error parsing saved user:', error);
                    localStorage.removeItem('currentUser');
                    // Ø¯Ø± ØµÙˆØ±Øª Ø®Ø·Ø§ØŒ Ù†Ù…Ø§ÛŒØ´ ØµÙØ­Ù‡ Ù„Ø§Ú¯ÛŒÙ†
                    document.getElementById('loginPage').style.display = 'block';
                    document.getElementById('mainContainer').style.display = 'none';
                    document.getElementById('logoutContainer').style.display = 'none';
                    document.getElementById('successPage').style.display = 'none';
                }
            } else {
                // Ø§Ú¯Ø± Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø°Ø®ÛŒØ±Ù‡ Ù†Ø´Ø¯Ù‡ØŒ Ù†Ù…Ø§ÛŒØ´ ØµÙØ­Ù‡ Ù„Ø§Ú¯ÛŒÙ†
                document.getElementById('loginPage').style.display = 'block';
                document.getElementById('mainContainer').style.display = 'none';
                document.getElementById('logoutContainer').style.display = 'none';
                document.getElementById('successPage').style.display = 'none';
            }
        }

        // ØªÙ†Ø¸ÛŒÙ… event listener Ø¨Ø±Ø§ÛŒ ÙØ±Ù… Ù„Ø§Ú¯ÛŒÙ†
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('loginForm').addEventListener('submit', handleLogin);
            checkPreviousLogin();
            
            // Ú©Ù„ÛŒØ¯ Enter Ø¨Ø±Ø§ÛŒ Ù„Ø§Ú¯ÛŒÙ†
            document.getElementById('loginPage').addEventListener('keydown', function(e) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    document.getElementById('loginForm').dispatchEvent(new Event('submit'));
                }
            });
        });

        // Ø¨Ù‡Ø¨ÙˆØ¯ Ø§Ù…Ù†ÛŒØª - Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø§Ø² Ø­Ø§ÙØ¸Ù‡
        document.getElementById('password').addEventListener('blur', function() {
            setTimeout(() => {
                if (currentUser) {
                    this.value = '';
                }
            }, 1000);
        });
        // End of login page
        let currentStep = 1;
        const totalSteps = 7;

        // ØªÙ†Ø¸ÛŒÙ… Ø§ÙˆÙ„ÛŒÙ‡
        document.getElementById('prevBtn').style.display = 'none';

        function updateProgressBar() {
            const progress = (currentStep / totalSteps) * 100;
            document.querySelector('.progress-fill').style.width = progress + '%';
        }

        function updateStepIndicator() {
            const steps = document.querySelectorAll('.step');
            steps.forEach((step, index) => {
                step.classList.remove('active', 'completed');
                if (index + 1 === currentStep) {
                    step.classList.add('active');
                } else if (index + 1 < currentStep) {
                    step.classList.add('completed');
                }
            });
        }

        function showStep(step) {
            const steps = document.querySelectorAll('.form-step');
            steps.forEach(s => s.classList.remove('active'));
            
            const targetStep = document.querySelectorAll('.form-step')[step - 1];
            if (targetStep) {
                targetStep.classList.add('active');
            }

            // Ù†Ù…Ø§ÛŒØ´/Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù† Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§
            document.getElementById('prevBtn').style.display = step === 1 ? 'none' : 'inline-block';
            document.getElementById('nextBtn').style.display = step === totalSteps ? 'none' : 'inline-block';
            document.getElementById('submitBtn').style.display = step === totalSteps ? 'inline-block' : 'none';

            updateProgressBar();
            updateStepIndicator();
        }

        function changeStep(direction) {
            const newStep = currentStep + direction;
            
            if (newStep >= 1 && newStep <= totalSteps) {
                // Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ Ù…Ø±Ø­Ù„Ù‡ ÙØ¹Ù„ÛŒ Ù‚Ø¨Ù„ Ø§Ø² Ø§Ø¯Ø§Ù…Ù‡
                if (direction === 1 && !validateCurrentStep()) {
                    return false;
                }
                
                currentStep = newStep;
                showStep(currentStep);
            }
        }

        function validateCurrentStep() {
            const currentStepElement = document.querySelectorAll('.form-step')[currentStep - 1];
            const requiredFields = currentStepElement.querySelectorAll('[required]');
            
            for (let field of requiredFields) {
                if (!field.value.trim()) {
                    showMessage('Ù„Ø·ÙØ§Ù‹ ØªÙ…Ø§Ù… ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø§Ø¬Ø¨Ø§Ø±ÛŒ Ø±Ø§ ØªÚ©Ù…ÛŒÙ„ Ú©Ù†ÛŒØ¯.', 'error');
                    field.focus();
                    return false;
                }
            }
            return true;
        }

        function toggleInactiveReason(input, reasonFieldName) {
            const reasonField = document.querySelector(`input[name="${reasonFieldName}"]`);
            if (reasonField) {
                if (parseInt(input.value) > 0) {
                    reasonField.style.display = 'block';
                    reasonField.required = true;
                } else {
                    reasonField.style.display = 'none';
                    reasonField.required = false;
                    reasonField.value = '';
                }
            }
        }

        function toggleSubInputs(checkbox, targetId) {
            const subInputs = document.getElementById(targetId);
            const descriptionField = document.getElementById(targetId.replace('_inputs', '_desc'));
            
            if (subInputs) {
                if (checkbox.checked) {
                    subInputs.classList.add('active');
                    // ØªÙ†Ø¸ÛŒÙ… ÙÛŒÙ„Ø¯Ù‡Ø§ Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† Ø§Ø¬Ø¨Ø§Ø±ÛŒ
                    subInputs.querySelectorAll('input').forEach(input => {
                        input.required = true;
                    });
                    
                    // Ù†Ù…Ø§ÛŒØ´ ÙÛŒÙ„Ø¯ ØªÙˆØ¶ÛŒØ­Ø§Øª
                    if (descriptionField) {
                        descriptionField.classList.add('active');
                    }
                } else {
                    subInputs.classList.remove('active');
                    // Ø­Ø°Ù Ø§Ø¬Ø¨Ø§Ø±ÛŒ Ø¨ÙˆØ¯Ù† Ùˆ Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ù…Ù‚Ø§Ø¯ÛŒØ±
                    subInputs.querySelectorAll('input').forEach(input => {
                        input.required = false;
                        input.value = '';
                    });
                    
                    // Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù† Ùˆ Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† ÙÛŒÙ„Ø¯ ØªÙˆØ¶ÛŒØ­Ø§Øª
                    if (descriptionField) {
                        descriptionField.classList.remove('active');
                        const textarea = descriptionField.querySelector('textarea');
                        if (textarea) {
                            textarea.value = '';
                        }
                    }
                }
            }
        }

        function showMessage(text, type) {
            const messageDiv = document.getElementById('message');
            messageDiv.textContent = text;
            messageDiv.className = `message ${type}`;
            messageDiv.style.display = 'block';
            
            // Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù† Ù¾ÛŒØ§Ù… Ø¨Ø¹Ø¯ Ø§Ø² 5 Ø«Ø§Ù†ÛŒÙ‡
            setTimeout(() => {
                messageDiv.style.display = 'none';
            }, 10000);
        }

        // ØªØ§Ø¨Ø¹ ÙØ´Ø±Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ ØªØµÙˆÛŒØ±
        function compressImage(file, quality = 0.7, maxWidth = 1200) {
            return new Promise((resolve) => {
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                const img = new Image();
                
                img.onload = function() {
                    // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø§Ø¨Ø¹Ø§Ø¯ Ø¬Ø¯ÛŒØ¯
                    let { width, height } = img;
                    
                    if (width > maxWidth) {
                        height = (height * maxWidth) / width;
                        width = maxWidth;
                    }
                    
                    canvas.width = width;
                    canvas.height = height;
                    
                    // Ø±Ø³Ù… ØªØµÙˆÛŒØ± ÙØ´Ø±Ø¯Ù‡ Ø´Ø¯Ù‡
                    ctx.drawImage(img, 0, 0, width, height);
                    
                    // ØªØ¨Ø¯ÛŒÙ„ Ø¨Ù‡ blob Ø¨Ø§ Ú©ÛŒÙÛŒØª Ú©Ù…ØªØ±
                    canvas.toBlob(resolve, 'image/jpeg', quality);
                };
                
                img.src = URL.createObjectURL(file);
            });
        }

        // Add this helper function to convert file to base64
        async function fileToBase64(file) {
            return new Promise(async (resolve, reject) => {
                try {
                    // ÙØ´Ø±Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù‚Ø¨Ù„ Ø§Ø² ØªØ¨Ø¯ÛŒÙ„ Ø¨Ù‡ base64
                    const compressedFile = await compressImage(file, 0.7, 1200);
                    
                    const reader = new FileReader();
                    reader.readAsDataURL(compressedFile);
                    reader.onload = () => resolve(reader.result.split(',')[1]);
                    reader.onerror = error => reject(error);
                } catch (error) {
                    reject(error);
                }
            });
        }

        async function collectFormData() {
            const formData = new FormData(document.getElementById('dailyReportForm'));
            const data = {};
            
            // ØªØ¨Ø¯ÛŒÙ„ FormData Ø¨Ù‡ Object
            for (let [key, value] of formData.entries()) {
                data[key] = value;
            }
            
            // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† radio button values
            const radioButtons = document.querySelectorAll('input[type="radio"]:checked');
            radioButtons.forEach(radio => {
                data[radio.name] = radio.value;
            });
            
            // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† checkbox values
            const checkboxes = document.querySelectorAll('input[type="checkbox"]:checked');
            checkboxes.forEach(checkbox => {
                data[checkbox.name] = true;
            });
            
            // Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø§Ø² Ø°Ø®ÛŒØ±Ù‡ Ù†Ø§Ù… Ø³Ø±Ù¾Ø±Ø³Øª
            const supervisorSelect = document.getElementById('supervisorName');
            if (supervisorSelect && supervisorSelect.value) {
                data['supervisorName'] = supervisorSelect.value;
            }
            
            // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† ØªÙ…Ø§Ù… select values Ø¨Ù‡ ØµÙˆØ±Øª Ø¯Ø³ØªÛŒ
            const selects = document.querySelectorAll('select');
            selects.forEach(select => {
                if (select.name && select.value) {
                    data[select.name] = select.value;
                }
            });
            
            // Handle multiple images
            const imageFiles = imageFilesList;
            if (imageFiles && imageFiles.length > 0) {
                data.images = [];
                const maxImages = Math.min(imageFiles.length, 5); // ØªØºÛŒÛŒØ± Ø§Ø² 2 Ø¨Ù‡ 5
                
                for (let i = 0; i < maxImages; i++) {
                    const base64 = await fileToBase64(imageFiles[i]);
                    data.images.push({
                        base64: base64,
                        name: imageFiles[i].name
                    });
                }
            }

            console.log('Form data being sent:', data); // Ø¨Ø±Ø§ÛŒ Ø¯ÛŒØ¨Ø§Ú¯
            return data;
        }
        

        function showSuccessPage() {
            // Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù† ØªÙ…Ø§Ù… ØµÙØ­Ø§Øª
            document.getElementById('loginPage').style.display = 'none';
            document.getElementById('mainContainer').style.display = 'none';
            document.getElementById('logoutContainer').style.display = 'none';
            
            // Ù†Ù…Ø§ÛŒØ´ ØµÙØ­Ù‡ Ù…ÙˆÙÙ‚ÛŒØª
            document.getElementById('successPage').style.display = 'block';
            
            // Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø§Ø² ÙØ±Ù…
            const siteName = document.getElementById('siteName').value || 'Ù†Ø§Ù…Ø´Ø®Øµ';
            const reportDate = document.getElementById('reportDate').value || 'Ù†Ø§Ù…Ø´Ø®Øµ';
            const supervisorName = document.getElementById('supervisorName').value || 'Ù†Ø§Ù…Ø´Ø®Øµ';
            const siteStatus = document.querySelector('input[name="siteStatus"]:checked')?.value || 'Ù†Ø§Ù…Ø´Ø®Øµ';
            const weatherStatus = document.getElementById('weatherStatus').value || 'Ù†Ø§Ù…Ø´Ø®Øµ';
            
            // ØªÙ†Ø¸ÛŒÙ… Ø§Ø·Ù„Ø§Ø¹Ø§Øª
            const now = new Date();
            const reportId = 'RPT-' + now.getTime().toString().slice(-8);
            const submitTime = now.toLocaleDateString('fa-IR-u-nu-latn', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit'
            }) + ' ' + now.toLocaleTimeString('fa-IR');
            
            // ØªÙ†Ø¸ÛŒÙ… Ø´Ù…Ø§Ø±Ù‡ Ø«Ø¨Øª Ùˆ Ø²Ù…Ø§Ù† Ø§Ø±Ø³Ø§Ù„ (Ø§Ú¯Ø± Ø¹Ù†Ø§ØµØ± Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ø´Ù†Ø¯)
            const reportIdElement = document.getElementById('reportId');
            const submitTimeElement = document.getElementById('submitTime');
            
            if (reportIdElement) {
                reportIdElement.textContent = reportId;
            }
            
            if (submitTimeElement) {
                submitTimeElement.textContent = submitTime;
            }
            
            // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù…Ø­ØªÙˆØ§ÛŒ ØµÙØ­Ù‡ Ù…ÙˆÙÙ‚ÛŒØª Ø¨Ø§ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¬Ø¯ÛŒØ¯
            const infoBox = document.querySelector('#successPage .container div[style*="background: #f0f9ff"]');
            if (infoBox) {
                infoBox.innerHTML = `
                    <p style="color: #0369a1; margin: 0; line-height: 1.8;">
                        ğŸ“‹ Ø´Ù…Ø§Ø±Ù‡ Ø«Ø¨Øª: <strong>${reportId}</strong><br>
                        ğŸ“… ØªØ§Ø±ÛŒØ® Ø§Ø±Ø³Ø§Ù„: <strong>${submitTime}</strong><br>
                        ğŸ—ï¸ Ù†Ø§Ù… Ø³Ø§Ø®ØªÚ¯Ø§Ù‡: <strong>${siteName}</strong><br>
                        ğŸ“† ØªØ§Ø±ÛŒØ® Ú¯Ø²Ø§Ø±Ø´: <strong>${reportDate}</strong><br>
                        ğŸ‘¤ Ø³Ø±Ù¾Ø±Ø³Øª: <strong>${supervisorName}</strong><br>
                        ğŸ”„ ÙˆØ¶Ø¹ÛŒØª Ø³Ø§Ø®ØªÚ¯Ø§Ù‡: <strong>${siteStatus}</strong><br>
                        ğŸŒ¤ï¸ ÙˆØ¶Ø¹ÛŒØª Ø¬ÙˆÛŒ: <strong>${weatherStatus}</strong>
                    </p>
                `;
            }
            
            // ØºÛŒØ±ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ø¯Ú©Ù…Ù‡ Ø¨Ø±Ú¯Ø´Øª Ù…Ø±ÙˆØ±Ú¯Ø±
            history.pushState(null, null, location.href);
            window.onpopstate = function () {
                history.go(1);
            };
        }


        function startNewReport() {
            // Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù† ØµÙØ­Ù‡ Ù…ÙˆÙÙ‚ÛŒØª
            document.getElementById('successPage').style.display = 'none';
            
            // Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ ÙØ±Ù… Ø§ØµÙ„ÛŒ (Ø§Ù…Ø§ Ù†Ù‡ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø±)
            document.getElementById('dailyReportForm').reset();
            
            // Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ Ù…Ø±Ø§Ø­Ù„
            currentStep = 1;
            
            // Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† ØªÙ…Ø§Ù… sub-inputs
            document.querySelectorAll('.sub-inputs').forEach(sub => {
                sub.classList.remove('active');
                sub.querySelectorAll('input').forEach(input => {
                    input.required = false;
                    input.value = '';
                });
            });
            
            // Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† ØªÙ…Ø§Ù… reason fields
            document.querySelectorAll('input[name$="_reason"]').forEach(field => {
                field.style.display = 'none';
                field.required = false;
                field.value = '';
            });

            // Delete Image input 
            // clear the preview panel
            document.getElementById('imagePreview').innerHTML = '';
            // reset the file input
            document.getElementById('siteImages').value = '';
            imageFilesList = []; 

            
            // Ù†Ù…Ø§ÛŒØ´ ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ
            document.getElementById('loginPage').style.display = 'none';
            document.getElementById('mainContainer').style.display = 'block';
            document.getElementById('logoutContainer').style.display = 'block';
            
            // ØªÙ†Ø¸ÛŒÙ… Ù…Ø¬Ø¯Ø¯ Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø± Ø¯Ø± ÙØ±Ù…
            if (currentUser && currentUser.name) {
                const supervisorSelect = document.getElementById('supervisorName');
                supervisorSelect.value = currentUser.name;
                supervisorSelect.disabled = true;
            }
            
            // Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ Ù†Ù…Ø§ÛŒØ´ Ù…Ø±Ø§Ø­Ù„
            showStep(1);
            
            // ØªÙ†Ø¸ÛŒÙ… ØªØ§Ø±ÛŒØ® Ø¬Ø¯ÛŒØ¯
            setDefaultDate();
            
            // ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø¯Ú©Ù…Ù‡ Ø¨Ø±Ú¯Ø´Øª
            window.onpopstate = null;
            
            // Ù¾ÛŒØ§Ù… ØªØ§ÛŒÛŒØ¯
            setTimeout(() => {
                showMessage('Ø¢Ù…Ø§Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ Ø«Ø¨Øª Ú¯Ø²Ø§Ø±Ø´ Ø¬Ø¯ÛŒØ¯! ğŸ“‹', 'success');
            }, 500);
        }

        // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø§ÛŒÙ† ØªØ§Ø¨Ø¹ Ø¬Ø¯ÛŒØ¯ Ù‚Ø¨Ù„ Ø§Ø² submitForm
        function showConfirmationPopup() {
            // Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´
            const reportDate = document.getElementById('reportDate').value || 'ØªØ§Ø±ÛŒØ® ÙˆØ§Ø±Ø¯ Ù†Ø´Ø¯Ù‡';
            const siteName = document.getElementById('siteName').value || 'Ù†Ø§Ù… Ø³Ø§Ø®ØªÚ¯Ø§Ù‡ Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ø´Ø¯Ù‡';
            
            // Ø§ÛŒØ¬Ø§Ø¯ popup
            const popup = document.createElement('div');
            popup.id = 'confirmationPopup';
            popup.innerHTML = `
                <div style="
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0, 0, 0, 0.5);
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    z-index: 10000;
                    backdrop-filter: blur(5px);
                ">
                    <div style="
                        background: white;
                        border-radius: 12px;
                        padding: 32px;
                        max-width: 450px;
                        width: 90%;
                        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
                        text-align: center;
                        font-family: 'Segoe UI', 'Tahoma', 'Arial', sans-serif;
                    ">
                        <div style="font-size: 3rem; margin-bottom: 16px;">ğŸ“‹</div>
                        <h3 style="color: #1e293b; margin-bottom: 24px; font-size: 1.25rem;">ØªØ§ÛŒÛŒØ¯ Ù†Ù‡Ø§ÛŒÛŒ Ø§Ø±Ø³Ø§Ù„ Ú¯Ø²Ø§Ø±Ø´</h3>
                        
                        <div style="
                            background: #f8fafc;
                            border: 1px solid #e2e8f0;
                            border-radius: 8px;
                            padding: 20px;
                            margin-bottom: 24px;
                            text-align: right;
                        ">
                            <div style="margin-bottom: 12px;">
                                <strong style="color: #374151;">ğŸ“… ØªØ§Ø±ÛŒØ® Ú¯Ø²Ø§Ø±Ø´:</strong>
                                <span style="color: #1e293b; margin-right: 8px;">${reportDate}</span>
                            </div>
                            <div>
                                <strong style="color: #374151;">ğŸ—ï¸ Ù†Ø§Ù… Ø³Ø§Ø®ØªÚ¯Ø§Ù‡:</strong>
                                <span style="color: #1e293b; margin-right: 8px;">${siteName}</span>
                            </div>
                        </div>
                        
                        <p style="color: #6b7280; margin-bottom: 24px; font-size: 0.875rem;">
                            Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø§ÛŒÙ† Ú¯Ø²Ø§Ø±Ø´ Ø±Ø§ Ø§Ø±Ø³Ø§Ù„ Ú©Ù†ÛŒØ¯ØŸ
                        </p>
                        
                        <div style="display: flex; gap: 12px; justify-content: center;">
                            <button id="confirmSubmit" style="
                                background: #475569;
                                color: white;
                                border: none;
                                border-radius: 8px;
                                padding: 12px 24px;
                                font-size: 0.875rem;
                                cursor: pointer;
                                font-weight: 500;
                                transition: background-color 0.2s ease;
                            ">
                                âœ… ØªØ§ÛŒÛŒØ¯ Ùˆ Ø§Ø±Ø³Ø§Ù„
                            </button>
                            <button id="cancelSubmit" style="
                                background: #6b7280;
                                color: white;
                                border: none;
                                border-radius: 8px;
                                padding: 12px 24px;
                                font-size: 0.875rem;
                                cursor: pointer;
                                font-weight: 500;
                                transition: background-color 0.2s ease;
                            ">
                                âŒ Ø§Ù†ØµØ±Ø§Ù
                            </button>
                        </div>
                        
                        <!-- Progress Bar Section -->
                        <div id="submissionProgressSection" style="display: none; margin-top: 24px;">
                            <div class="submission-progress">
                                <div class="submission-progress-fill" id="submissionProgressFill"></div>
                            </div>
                            <div class="submission-status" id="submissionStatus">Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª...</div>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(popup);
            
            // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† event listeners
            document.getElementById('confirmSubmit').addEventListener('click', function() {
                submitFormConfirmed(); 
            });
            
            document.getElementById('cancelSubmit').addEventListener('click', function() {
                document.body.removeChild(popup);
            });
            
            // Ø¨Ø³ØªÙ† popup Ø¨Ø§ Ú©Ù„ÛŒÚ© Ø±ÙˆÛŒ background
            popup.addEventListener('click', function(e) {
                if (e.target === popup) {
                    document.body.removeChild(popup);
                }
            });
            
            // Ø¨Ø³ØªÙ† popup Ø¨Ø§ Ú©Ù„ÛŒØ¯ Escape
            document.addEventListener('keydown', function escapeHandler(e) {
                if (e.key === 'Escape') {
                    if (document.getElementById('confirmationPopup')) {
                        document.body.removeChild(popup);
                    }
                    document.removeEventListener('keydown', escapeHandler);
                }
            });
        }

        // ØªØ§Ø¨Ø¹ Ú©Ù†ØªØ±Ù„ Progress Bar
        function updateSubmissionProgress(percentage, status) {
            const progressFill = document.getElementById('submissionProgressFill');
            const statusText = document.getElementById('submissionStatus');
            
            if (progressFill) {
                progressFill.style.width = percentage + '%';
            }
            
            if (statusText) {
                statusText.textContent = status;
            }
        }

        function showSubmissionProgress() {
            const progressSection = document.getElementById('submissionProgressSection');
            const buttons = document.querySelectorAll('#confirmationPopup button');
            
            if (progressSection) {
                progressSection.style.display = 'block';
            }
            
            // ØºÛŒØ±ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§
            buttons.forEach(btn => {
                btn.disabled = true;
                btn.style.opacity = '0.5';
                btn.style.cursor = 'not-allowed';
            });
        }

        //  ØªØ§Ø¨Ø¹ submitFormConfirmed
        async function submitFormConfirmed() {
            const submitBtn = document.getElementById('submitBtn');
            submitBtn.disabled = true;
            submitBtn.classList.add('loading');

            // Ù†Ù…Ø§ÛŒØ´ Progress Bar
            showSubmissionProgress();

            try {
                // Ù…Ø±Ø­Ù„Ù‡ 1: Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª
                updateSubmissionProgress(10, 'Ø¯Ø± Ø­Ø§Ù„ Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª...');
                await new Promise(resolve => setTimeout(resolve, 500));
                
                const formData = await collectFormData();
                
                // Ù…Ø±Ø­Ù„Ù‡ 2: Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ ØªØµØ§ÙˆÛŒØ±
                if (formData.images && formData.images.length > 0) {
                    updateSubmissionProgress(30, `Ø¯Ø± Ø­Ø§Ù„ Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ ${formData.images.length} ØªØµÙˆÛŒØ±...`);
                    await new Promise(resolve => setTimeout(resolve, 800));
                } else {
                    updateSubmissionProgress(30, 'Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯...');
                    await new Promise(resolve => setTimeout(resolve, 500));
                }
                
                console.log(formData);
                
                // Ù…Ø±Ø­Ù„Ù‡ 3: Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ Ø³Ø±ÙˆØ± Ø§ØµÙ„ÛŒ
                updateSubmissionProgress(50, 'Ø¯Ø± Ø­Ø§Ù„ Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ Ø³Ø±ÙˆØ± Ø§ØµÙ„ÛŒ...');
                
                const scriptUrl = 'https://script.google.com/macros/s/AKfycbzYXqJb_IlnWyNpDQJSIiC02hFNkKcHcIsdY3-Mqy1emXx-w3HTQBSaX_Wm9IaAQOBG/exec';
                
                const response = await fetch(scriptUrl, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'text/plain;charset=utf-8',
                    },
                    body: JSON.stringify(formData)
                });
                
                console.log(response);
                
                // Ù…Ø±Ø­Ù„Ù‡ 4: ØªØ§ÛŒÛŒØ¯ Ø§Ø±Ø³Ø§Ù„
                updateSubmissionProgress(80, 'ØªØ§ÛŒÛŒØ¯ Ø¯Ø±ÛŒØ§ÙØª Ø§Ø² Ø³Ø±ÙˆØ±...');
                await new Promise(resolve => setTimeout(resolve, 500));
                
                // Ù…Ø±Ø­Ù„Ù‡ 5: ØªÚ©Ù…ÛŒÙ„ Ø§Ø±Ø³Ø§Ù„ Ø§ØµÙ„ÛŒ
                updateSubmissionProgress(100, 'Ø§Ø±Ø³Ø§Ù„ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯! âœ…');
                await new Promise(resolve => setTimeout(resolve, 800));
                
                // Ø¨Ø³ØªÙ† popup Ùˆ Ù†Ù…Ø§ÛŒØ´ ØµÙØ­Ù‡ Ù…ÙˆÙÙ‚ÛŒØª
                const popup = document.getElementById('confirmationPopup');
                if (popup) {
                    document.body.removeChild(popup);
                }
                
                // Ù†Ù…Ø§ÛŒØ´ ØµÙØ­Ù‡ Ù…ÙˆÙÙ‚ÛŒØª ÙÙˆØ±ÛŒ
                showSuccessPage();
                
                // Ø§Ø±Ø³Ø§Ù„ Ø¢Ø³Ù†Ú©Ø±ÙˆÙ† Ø¨Ù‡ Ø³Ø±ÙˆØ± Ù¾Ø´ØªÛŒØ¨Ø§Ù† (Ø¯Ø± Ù¾Ø³â€ŒØ²Ù…ÛŒÙ†Ù‡)
                const secondScriptUrl = 'https://script.google.com/macros/s/AKfycbxdD7aIYgfCkYrulq4INvQ3t_sV4_ve7yLF0PyVXcgu_WG4rUldRO4MUydS_vdJDXxB/exec';
                
                // Ø§Ø±Ø³Ø§Ù„ ØºÛŒØ±Ù‡Ù…Ø²Ù…Ø§Ù† - Ú©Ø§Ø±Ø¨Ø± Ù…Ù†ØªØ¸Ø± Ù†Ù…ÛŒâ€ŒÙ…Ø§Ù†Ø¯
                fetch(secondScriptUrl, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'text/plain;charset=utf-8',
                    },
                    body: JSON.stringify(formData)
                }).then(response => {
                    console.log('Second script called successfully in background');
                }).catch(error => {
                    console.error('Error calling second script (background):', error);
                    // Ø®Ø·Ø§ Ø¯Ø± Ø³Ø±ÙˆØ± Ø¯ÙˆÙ…ØŒ Ø§Ù…Ø§ Ú©Ø§Ø±Ø¨Ø± Ø±Ø§ Ø¢Ú¯Ø§Ù‡ Ù†Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ… Ú†ÙˆÙ† Ø¯Ø± Ù¾Ø³â€ŒØ²Ù…ÛŒÙ†Ù‡ Ø§Ø³Øª
                });

            } catch (error) {
                console.error('Error:', error);
                
                updateSubmissionProgress(100, 'Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±Ø³Ø§Ù„! Ø§Ù…Ø§ Ø§Ø­ØªÙ…Ø§Ù„Ø§Ù‹ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯. âŒ');
                await new Promise(resolve => setTimeout(resolve, 1500));
                
                // Ø¨Ø³ØªÙ† popup Ø¯Ø± ØµÙˆØ±Øª Ø®Ø·Ø§
                const popup = document.getElementById('confirmationPopup');
                if (popup) {
                    document.body.removeChild(popup);
                }
                
                showMessage('Ú¯Ø²Ø§Ø±Ø´ Ø§Ø­ØªÙ…Ø§Ù„Ø§Ù‹ Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯Ù‡ Ø§Ø³Øª. Ø¯Ø± ØµÙˆØ±Øª Ø¹Ø¯Ù… Ø§Ø·Ù…ÛŒÙ†Ø§Ù†ØŒ Ù„Ø·ÙØ§Ù‹ Google Sheet Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯.', 'info');
                
            } finally {
                submitBtn.disabled = false;
                submitBtn.classList.remove('loading');
            }
        }
        // ØªØ§Ø¨Ø¹ submitForm Ø¬Ø¯ÛŒØ¯ Ú©Ù‡ popup Ø±Ø§ Ù†Ù…Ø§ÛŒØ´ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯
        function submitForm() {
            // Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ Ù†Ù‡Ø§ÛŒÛŒ
            if (!validateCurrentStep()) {
                return;
            }
            
            // Ù†Ù…Ø§ÛŒØ´ popup ØªØ§ÛŒÛŒØ¯
            showConfirmationPopup();
        }

        // ØªØ§Ø¨Ø¹ Ú©Ù„ÛŒ Ø¨Ø±Ø§ÛŒ ØªØ¨Ø¯ÛŒÙ„ Ø§Ø¹Ø¯Ø§Ø¯ ÙØ§Ø±Ø³ÛŒ Ø¨Ù‡ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ
        function persianToEnglishDigits(text) {
            const persianDigits = 'Û°Û±Û²Û³Û´ÛµÛ¶Û·Û¸Û¹';
            const englishDigits = '0123456789';
            return text.replace(/[Û°-Û¹]/g, function(match) {
                return englishDigits[persianDigits.indexOf(match)];
            });
        }

        // ØªÙ†Ø¸ÛŒÙ… ØªØ§Ø±ÛŒØ® Ù¾ÛŒØ´â€ŒÙØ±Ø¶
        function setDefaultDate() {
        const today = new Date();
        
        // ØªØ¨Ø¯ÛŒÙ„ Ø¨Ù‡ ØªØ§Ø±ÛŒØ® Ø´Ù…Ø³ÛŒ Ø¨Ø§ ÙØ±Ù…Øª Ù…Ù†Ø§Ø³Ø¨
        const persianDate = today.toLocaleDateString('fa-IR-u-nu-latn', {
            year: 'numeric',
            month: '2-digit',
            day: '2-digit'
        });
        
        // ØªØ¨Ø¯ÛŒÙ„ Ø§Ø¹Ø¯Ø§Ø¯ ÙØ§Ø±Ø³ÛŒ Ø¨Ù‡ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ (Ø¯Ø± ØµÙˆØ±Øª Ù†ÛŒØ§Ø²)
        const englishDate = persianToEnglishDigits(persianDate);
        
        document.getElementById('reportDate').value = englishDate;
    }


        // Ø§Ø¬Ø±Ø§ÛŒ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø§ÙˆÙ„ÛŒÙ‡
        document.addEventListener('DOMContentLoaded', function() {
            setDefaultDate();
            showStep(1);
            
            // ØªÙ†Ø¸ÛŒÙ… event listener Ø¨Ø±Ø§ÛŒ Ú©ÛŒØ¨ÙˆØ±Ø¯
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' && e.target.tagName !== 'TEXTAREA') {
                    e.preventDefault();
                    if (currentStep < totalSteps) {
                        changeStep(1);
                    } else {
                        submitForm();
                    }
                }
                
                // Ú©Ù„ÛŒØ¯Ù‡Ø§ÛŒ Ø¬Ù‡Øªâ€ŒØ¯Ø§Ø± Ø¨Ø±Ø§ÛŒ Ù†Ø§ÙˆØ¨Ø±ÛŒ
                if (e.key === 'ArrowRight' && e.ctrlKey) {
                    e.preventDefault();
                    changeStep(-1);
                }
                if (e.key === 'ArrowLeft' && e.ctrlKey) {
                    e.preventDefault();
                    changeStep(1);
                }
            });
        });

        // Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø§Ø±Ø³Ø§Ù„ ÙØ±Ù… Ø¨Ø§ Enter
        document.getElementById('dailyReportForm').addEventListener('submit', function(e) {
            e.preventDefault();
        });

        // ØªØ§Ø¨Ø¹ Ø¨Ù‡Ø¨ÙˆØ¯ UX - Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø®ÙˆØ¯Ú©Ø§Ø± Ù…Ø¬Ù…ÙˆØ¹
        function autoCalculateTotal(equipmentName) {
            const totalInput = document.querySelector(`input[name="${equipmentName}_total"]`);
            const activeInput = document.querySelector(`input[name="${equipmentName}_active"]`);
            const inactiveInput = document.querySelector(`input[name="${equipmentName}_inactive"]`);
            
            if (totalInput && activeInput && inactiveInput) {
                const active = parseInt(activeInput.value) || 0;
                const inactive = parseInt(inactiveInput.value) || 0;
                totalInput.value = active + inactive;
            }
        }

        // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† event listener Ø¨Ø±Ø§ÛŒ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø®ÙˆØ¯Ú©Ø§Ø±
        document.addEventListener('DOMContentLoaded', function() {
            const equipmentTypes = ['drill', 'loader', 'camera', 'wheel_excavator', 'track_excavator', 
                                   'crane_5t', 'crane_3t', 'pickup', 'mixer_truck', 'tractor', 
                                   'generator', 'water_tanker'];
            
            equipmentTypes.forEach(equipment => {
                const activeInput = document.querySelector(`input[name="${equipment}_active"]`);
                const inactiveInput = document.querySelector(`input[name="${equipment}_inactive"]`);
                
                if (activeInput) {
                    activeInput.addEventListener('input', () => autoCalculateTotal(equipment));
                }
                if (inactiveInput) {
                    inactiveInput.addEventListener('input', () => autoCalculateTotal(equipment));
                }
            });
        });

        // Add image preview handler for multiple images
        document.getElementById('siteImages').addEventListener('change', function(e) {
            const selectedFiles = Array.from(e.target.files);
            const MAX_FILE_SIZE = 5 * 1024 * 1024; // 5 Ù…Ú¯Ø§Ø¨Ø§ÛŒØª Ø¨Ù‡ Ø¨Ø§ÛŒØª
            
            // Ø¨Ø±Ø±Ø³ÛŒ Ø­Ø¬Ù… ÙØ§ÛŒÙ„â€ŒÙ‡Ø§
            const validFiles = [];
            const invalidFiles = [];
            
            selectedFiles.forEach(file => {
                if (file.size > MAX_FILE_SIZE) {
                    invalidFiles.push({
                        name: file.name,
                        size: formatFileSize(file.size)
                    });
                } else {
                    validFiles.push(file);
                }
            });
            
            // Ù†Ù…Ø§ÛŒØ´ Ù¾Ø§Ù¾â€ŒØ§Ù¾ Ø®Ø·Ø§ Ø¨Ø±Ø§ÛŒ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø¨Ø²Ø±Ú¯
            if (invalidFiles.length > 0) {
                showLargeFilePopup(invalidFiles);
            }
            
            // Ø§Ø¯Ø§Ù…Ù‡ Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø¨Ø§ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ù…Ø¹ØªØ¨Ø±
            if (validFiles.length === 0) {
                // Ø±ÛŒØ³Øª input
                e.target.value = '';
                return;
            }
            
            // Ø¨Ø±Ø±Ø³ÛŒ Ø­Ø¯Ø§Ú©Ø«Ø± ØªØ¹Ø¯Ø§Ø¯ Ù…Ø¬Ø§Ø²
            const remainingSlots = 5 - imageFilesList.length;
            
            if (validFiles.length > remainingSlots) {
                showMessage(`Ø´Ù…Ø§ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø­Ø¯Ø§Ú©Ø«Ø± ${remainingSlots} ØªØµÙˆÛŒØ± Ø¯ÛŒÚ¯Ø± Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØ¯.`, 'error');
                
                // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† ÙÙ‚Ø· ØªØ¹Ø¯Ø§Ø¯ Ù…Ø¬Ø§Ø² Ø§Ø² ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ù…Ø¹ØªØ¨Ø±
                const filesToAdd = validFiles.slice(0, remainingSlots);
                imageFilesList.push(...filesToAdd);
            } else {
                // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† ØªÙ…Ø§Ù… ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ù…Ø¹ØªØ¨Ø±
                imageFilesList.push(...validFiles);
            }
            
            previewMultipleImages();
            
            // Ø±ÛŒØ³Øª input ØªØ§ Ø¨ØªÙˆÙ†Ù‡ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ù‡Ù…ÙˆÙ† ÙØ§ÛŒÙ„ Ø±Ùˆ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†Ù‡
            e.target.value = '';
            
            // Ù†Ù…Ø§ÛŒØ´ Ù¾ÛŒØ§Ù… ØªØ§ÛŒÛŒØ¯ Ø¨Ø±Ø§ÛŒ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ù…Ø¹ØªØ¨Ø±
            if (validFiles.length > 0) {
                const addedCount = Math.min(validFiles.length, remainingSlots);
                showMessage(`âœ… ${addedCount} ØªØµÙˆÛŒØ± Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯.`, 'success');
            }
        });
        function removeImageAt(index) {
            imageFilesList.splice(index, 1);
            previewMultipleImages();
            
            // Ù†Ù…Ø§ÛŒØ´ Ù¾ÛŒØ§Ù… ØªØ§ÛŒÛŒØ¯ Ø­Ø°Ù
            showMessage('ØªØµÙˆÛŒØ± Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø­Ø°Ù Ø´Ø¯.', 'info');
        }

        // ØªØ§Ø¨Ø¹ Ú©Ù…Ú©ÛŒ Ø¨Ø±Ø§ÛŒ ØªØ¨Ø¯ÛŒÙ„ Ø¨Ø§ÛŒØª Ø¨Ù‡ ÙØ±Ù…Øª Ù‚Ø§Ø¨Ù„ Ø®ÙˆØ§Ù†Ø¯Ù†
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }   

        // ØªØ§Ø¨Ø¹ Ù†Ù…Ø§ÛŒØ´ Ù¾Ø§Ù¾â€ŒØ§Ù¾ Ø¨Ø±Ø§ÛŒ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø¨Ø²Ø±Ú¯
        function showLargeFilePopup(invalidFiles) {
            const popup = document.createElement('div');
            popup.id = 'largeFilePopup';
            
            const filesList = invalidFiles.map(file => 
                `<li style="margin: 8px 0; padding: 8px; background: #fef2f2; border-radius: 6px; border-left: 3px solid #ef4444;">
                    <strong>${file.name.length > 25 ? file.name.substring(0, 25) + '...' : file.name}</strong>
                    <br><small style="color: #991b1b;">Ø­Ø¬Ù…: ${file.size}</small>
                </li>`
            ).join('');
            
            popup.innerHTML = `
                <div style="
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0, 0, 0, 0.6);
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    z-index: 10000;
                    backdrop-filter: blur(5px);
                ">
                    <div style="
                        background: white;
                        border-radius: 12px;
                        padding: 32px;
                        max-width: 500px;
                        width: 90%;
                        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
                        text-align: center;
                        font-family: 'Segoe UI', 'Tahoma', 'Arial', sans-serif;
                        max-height: 80vh;
                        overflow-y: auto;
                    ">
                        <div style="font-size: 3rem; margin-bottom: 16px;">âš ï¸</div>
                        <h3 style="color: #dc2626; margin-bottom: 16px; font-size: 1.25rem;">Ø­Ø¬Ù… ÙØ§ÛŒÙ„ Ø¨ÛŒØ´ Ø§Ø² Ø­Ø¯ Ù…Ø¬Ø§Ø²</h3>
                        
                        <p style="color: #374151; margin-bottom: 20px; line-height: 1.6;">
                            ØªØµØ§ÙˆÛŒØ± Ø²ÛŒØ± Ø¨ÛŒØ´ØªØ± Ø§Ø² Ûµ Ù…Ú¯Ø§Ø¨Ø§ÛŒØª Ù‡Ø³ØªÙ†Ø¯ Ùˆ Ù†Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù†Ø¯ Ø¢Ù¾Ù„ÙˆØ¯ Ø´ÙˆÙ†Ø¯:
                        </p>
                        
                        <ul style="
                            list-style: none;
                            padding: 0;
                            margin: 20px 0;
                            text-align: right;
                            max-height: 200px;
                            overflow-y: auto;
                            border: 1px solid #e5e7eb;
                            border-radius: 8px;
                            padding: 12px;
                        ">
                            ${filesList}
                        </ul>
                        
                        <div style="
                            background: #eff6ff;
                            border: 1px solid #bfdbfe;
                            border-radius: 8px;
                            padding: 16px;
                            margin: 20px 0;
                            text-align: right;
                        ">
                            <p style="color: #1e40af; margin: 0; font-size: 0.875rem; line-height: 1.5;">
                                ğŸ’¡ <strong>Ø±Ø§Ù‡ Ø­Ù„:</strong><br>
                                â€¢ ØªØµØ§ÙˆÛŒØ± Ø±Ø§ ÙØ´Ø±Ø¯Ù‡ Ú©Ù†ÛŒØ¯ ÛŒØ§ Ø¯Ø± Ø§Ù†Ø¯Ø§Ø²Ù‡ Ú©ÙˆÚ†Ú©â€ŒØªØ± Ø°Ø®ÛŒØ±Ù‡ Ú©Ù†ÛŒØ¯<br>
                                â€¢ ÛŒØ§ Ø§ÛŒÙ† ØªØµØ§ÙˆÛŒØ± Ø±Ø§ Ø¯Ø± <strong>Ø§ÛŒØªØ§</strong> Ø§Ø±Ø³Ø§Ù„ Ø¨ÙØ±Ù…Ø§ÛŒÛŒØ¯
                            </p>
                        </div>
                        
                        <button id="closeLargeFilePopup" style="
                            background: #dc2626;
                            color: white;
                            border: none;
                            border-radius: 8px;
                            padding: 12px 24px;
                            font-size: 0.875rem;
                            cursor: pointer;
                            font-weight: 500;
                            transition: background-color 0.2s ease;
                            margin-top: 16px;
                        ">
                            Ù…ØªÙˆØ¬Ù‡ Ø´Ø¯Ù…
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(popup);
            
            // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† event listener Ø¨Ø±Ø§ÛŒ Ø¨Ø³ØªÙ† Ù¾Ø§Ù¾â€ŒØ§Ù¾
            document.getElementById('closeLargeFilePopup').addEventListener('click', function() {
                document.body.removeChild(popup);
            });
            
            // Ø¨Ø³ØªÙ† Ù¾Ø§Ù¾â€ŒØ§Ù¾ Ø¨Ø§ Ú©Ù„ÛŒÚ© Ø±ÙˆÛŒ background
            popup.addEventListener('click', function(e) {
                if (e.target === popup) {
                    document.body.removeChild(popup);
                }
            });
            
            // Ø¨Ø³ØªÙ† Ù¾Ø§Ù¾â€ŒØ§Ù¾ Ø¨Ø§ Ú©Ù„ÛŒØ¯ Escape
            document.addEventListener('keydown', function escapeHandler(e) {
                if (e.key === 'Escape') {
                    if (document.getElementById('largeFilePopup')) {
                        document.body.removeChild(popup);
                    }
                    document.removeEventListener('keydown', escapeHandler);
                }
            });
        }

        function previewMultipleImages() {
            const preview = document.getElementById('imagePreview');
            preview.innerHTML = '';

            imageFilesList.slice(0, 5).forEach((file, i) => {
                const reader = new FileReader();
                reader.onload = function (e) {
                    const imgContainer = document.createElement('div');
                    imgContainer.className = 'img-container';
                    imgContainer.style.cssText = `
                        position: relative;
                        width: 100%;
                        height: 150px;
                        overflow: hidden;
                        border-radius: 8px;
                        border: 1px solid #e2e8f0;
                        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
                        transition: transform 0.2s ease;
                    `;
                    
                    // Ø§ÙÚ©Øª hover
                    imgContainer.addEventListener('mouseenter', () => {
                        imgContainer.style.transform = 'scale(1.02)';
                    });
                    imgContainer.addEventListener('mouseleave', () => {
                        imgContainer.style.transform = 'scale(1)';
                    });

                    const img = document.createElement('img');
                    img.src = e.target.result;
                    img.style.cssText = `
                        width: 100%;
                        height: 150px;
                        object-fit: cover;
                    `;
                    imgContainer.appendChild(img);

                    // Ø´Ù…Ø§Ø±Ù‡ ØªØµÙˆÛŒØ±
                    const imageNumber = document.createElement('div');
                    imageNumber.textContent = i + 1;
                    imageNumber.style.cssText = `
                        position: absolute;
                        top: 4px;
                        left: 4px;
                        background: rgba(0,0,0,0.7);
                        color: white;
                        border-radius: 50%;
                        width: 24px;
                        height: 24px;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        font-size: 12px;
                        font-weight: bold;
                    `;
                    imgContainer.appendChild(imageNumber);

                    // Ø¯Ú©Ù…Ù‡ Ø­Ø°Ù
                    const deleteBtn = document.createElement('button');
                    deleteBtn.className = 'delete-btn';
                    deleteBtn.textContent = 'Ã—';
                    deleteBtn.style.cssText = `
                        position: absolute;
                        top: 4px;
                        right: 4px;
                        background: rgba(220, 38, 38, 0.8);
                        color: white;
                        border: none;
                        border-radius: 50%;
                        width: 24px;
                        height: 24px;
                        font-size: 16px;
                        line-height: 24px;
                        text-align: center;
                        cursor: pointer;
                        font-weight: bold;
                        transition: background-color 0.2s ease;
                    `;
                    
                    deleteBtn.addEventListener('mouseenter', () => {
                        deleteBtn.style.background = 'rgba(220, 38, 38, 1)';
                    });
                    deleteBtn.addEventListener('mouseleave', () => {
                        deleteBtn.style.background = 'rgba(220, 38, 38, 0.8)';
                    });
                    
                    deleteBtn.addEventListener('click', () => removeImageAt(i));
                    imgContainer.appendChild(deleteBtn);

                    // Ù†Ø§Ù… ÙØ§ÛŒÙ„ Ùˆ Ø­Ø¬Ù…
                    const fileInfo = document.createElement('div');
                    const fileName = file.name.length > 12 ? file.name.substring(0, 12) + '...' : file.name;
                    const fileSize = formatFileSize(file.size);
                    fileInfo.innerHTML = `${fileName}<br><small>${fileSize}</small>`;
                    fileInfo.style.cssText = `
                        position: absolute;
                        bottom: 0;
                        left: 0;
                        right: 0;
                        background: rgba(0,0,0,0.8);
                        color: white;
                        padding: 6px 8px;
                        font-size: 10px;
                        text-align: center;
                        line-height: 1.2;
                    `;
                    imgContainer.appendChild(fileInfo);

                    preview.appendChild(imgContainer);
                };
                reader.readAsDataURL(file);
            });

            // Ù†Ù…Ø§ÛŒØ´ Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªØ¹Ø¯Ø§Ø¯ ØªØµØ§ÙˆÛŒØ±
            if (imageFilesList.length > 0) {
                const infoDiv = document.createElement('div');
                infoDiv.style.cssText = `
                    grid-column: 1 / -1;
                    text-align: center;
                    padding: 12px;
                    background: #f8fafc;
                    border: 1px solid #e2e8f0;
                    border-radius: 8px;
                    color: #374151;
                    font-size: 0.875rem;
                `;
                
                const remaining = 5 - imageFilesList.length;
                infoDiv.innerHTML = `
                    ğŸ“Š ${imageFilesList.length} Ø§Ø² Ûµ ØªØµÙˆÛŒØ± Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡
                    ${remaining > 0 ? `<br>Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ ${remaining} ØªØµÙˆÛŒØ± Ø¯ÛŒÚ¯Ø± Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØ¯` : '<br>Ø­Ø¯Ø§Ú©Ø«Ø± ØªØ¹Ø¯Ø§Ø¯ ØªØµÙˆÛŒØ± Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡'}
                `;
                
                preview.appendChild(infoDiv);
            }

            if (imageFilesList.length > 5) {
                showMessage('ÙÙ‚Ø· Ûµ ØªØµÙˆÛŒØ± Ø§ÙˆÙ„ Ø¢Ù¾Ù„ÙˆØ¯ Ø®ÙˆØ§Ù‡Ù†Ø¯ Ø´Ø¯', 'info');
            }
        }
    </script>
</body>
</html>